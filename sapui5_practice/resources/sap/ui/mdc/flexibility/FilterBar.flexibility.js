/*
 * ! SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/base/util/merge','sap/base/util/deepEqual'],function(m,d){"use strict";var a=function(c,C,p,n){var M,o,v;o=c.getContent();M=p.modifier;v=p.view;return M.createControl("sap.ui.mdc.base.FilterField",p.appComponent,p.view,o.id,{dataType:o.type,conditions:o.path,required:o.required,label:o.label,maxConditions:o.maxConditions},true).then(function(f){if(o.fieldHelp){if(M.targets==="jsControlTree"){f.setFieldHelp(v.createId(o.fieldHelp));}else{M.setProperty(f,"fieldHelp",o.fieldHelp);}}var b=o.constraints;if(b){M.setProperty(f,"dataTypeConstraints",b);}var F=o.formatOptions;if(F){M.setProperty(f,"dataTypeFormatOptions",F);}var e=M.getAggregation(C,"filterItems");n=n||e.length;M.insertAggregation(C,"filterItems",f,n);return M.getId(f);});};var r=function(c,C,o,p,b){var M=p.modifier;var e=M.getSelector(C.id,p.appComponent);var f=M.bySelector(e,p.appComponent,p.view);var i=M.findIndexInParentAggregation(f);M.removeAggregation(o,"filterItems",f);M.destroy(f);if(!b){c.setRevertData({id:C.id,index:i});}};var s=function(c,C,o,p,b){var M=p.modifier;var e,f=null;var i,n=C.position;if(C.id){e=M.getSelector(C.id,p.appComponent);f=M.bySelector(e,p.appComponent,p.view);}if(f){i=M.findIndexInParentAggregation(f);if(i!=n){M.removeAggregation(o,"filterItems",f);M.insertAggregation(o,"filterItems",f,n);}if(!b){c.setRevertData({id:C.id,position:n});}}};var A=function(c,C,o,p,b){if(o.applyConditionsAfterChangesApplied){o.applyConditionsAfterChangesApplied();}return new Promise(function(e){var f,g=null,M=p.modifier;f=m({},M.getProperty(o,"filtersConditions"));if(f){for(var F in f){if(F===C.name){g=f[F];break;}}}if(!g){f[C.name]=[];g=f[C.name];}var h=false;f[C.name].some(function(i){if(d(i,C.condition)){h=true;}return h;});if(!h){g.push(C.condition);M.setProperty(o,"filtersConditions",f);if(!b){c.setRevertData({name:C.name,condition:C.condition});}}e();});};var R=function(c,C,o,p,b){if(o.applyConditionsAfterChangesApplied){o.applyConditionsAfterChangesApplied();}return new Promise(function(e){var f,g,n=-1,M=p.modifier;f=m({},M.getProperty(o,"filtersConditions"));if(f){for(var F in f){if(F===C.name){g=f[F];break;}}}if(g&&(g.length>0)){g.some(function(E,h){if(d(E,C.condition)){n=h;}return n>=0;});if(n>=0){g.splice(n,1);if(g.length===0){delete f[C.name];}M.setProperty(o,"filtersConditions",f);if(!b){c.setRevertData({name:C.name,condition:C.condition});}}}e();});};return{"hideControl":"default","unhideControl":"default","removeFilter":{"changeHandler":{applyChange:function(c,C,p){return r(c,c.getContent(),C,p);},completeChangeContent:function(c,C,p){},revertChange:function(c,C,p){var o=c.getRevertData();return a(c,C,p,o.index).then(function(i){c.resetRevertData();});}},"layers":{"USER":true}},"addFilter":{"changeHandler":{applyChange:function(c,C,p){return a(c,C,p).then(function(i){c.setRevertData({id:i});});},completeChangeContent:function(c,C,p){},revertChange:function(c,C,p){r(c,c.getRevertData(),C,p,true);c.resetRevertData();}},"layers":{"USER":true}},"setFilterPosition":{"changeHandler":{applyChange:function(c,C,p){s(c,c.getContent(),C,p);},completeChangeContent:function(c,C,p){},revertChange:function(c,C,p){s(c,c.getRevertData(),C,p,true);c.resetRevertData();}},"layers":{"USER":true}},"addCondition":{"changeHandler":{applyChange:function(c,C,p){return A(c,c.getContent(),C,p);},completeChangeContent:function(c,C,p){},revertChange:function(c,C,p){return R(c,c.getRevertData(),C,p,true).then(function(){c.resetRevertData();});}},"layers":{"USER":true}},"removeCondition":{"changeHandler":{applyChange:function(c,C,p){return R(c,c.getContent(),C,p);},completeChangeContent:function(c,C,p){},revertChange:function(c,C,p){return A(c,c.getRevertData(),C,p,true).then(function(){c.resetRevertData();});}},"layers":{"USER":true}}};},false);
