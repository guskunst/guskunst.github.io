sap.ui.define(["sap/suite/ui/generic/template/changeHandler/util/AnnotationChangeUtilsV2","sap/suite/ui/generic/template/changeHandler/util/ChangeHandlerUtils","sap/suite/ui/generic/template/designtime/utils/DesigntimeUtils"],function(A,C,D){"use strict";var a={},b="DataField",c="ConnectedFields",d="Chart",e="RatingIndicator",f="ProgressIndicator",g="Contact",h="DataFieldWithIntentBasedNavigation",i="DataFieldForIntentBasedNavigation",j="DataFieldWithNavigationPath",k="DataFieldForAction",l="DataFieldWithUrl",m="ToolbarButton",L="com.sap.vocabularies.UI.v1.LineItem",n="com.sap.vocabularies.UI.v1.DataPoint",o="com.sap.vocabularies.UI.v1.DataField",p="com.sap.vocabularies.UI.v1.Chart",F="com.sap.vocabularies.UI.v1.FieldGroup",q="com.sap.vocabularies.Communication.v1.Contact",r="com.sap.vocabularies.UI.v1.DataFieldWithUrl",s="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath",t="com.sap.vocabularies.UI.v1.DataFieldForAnnotation",u="com.sap.vocabularies.UI.v1.DataFieldForAction",v="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation",I="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation";a.createNewColumn=function(R,O){var P,w={Label:{},Criticality:{},CriticalityRepresentation:{},IconUrl:{}},x={};x[o]=jQuery.extend({},w,{Value:{Path:""}});x[r]=jQuery.extend({},w,{Value:{Path:""},Url:{String:""}});x[s]=jQuery.extend({},w,{Value:{Path:""},Target:{NavigationPropertyPath:""}});x[t]=jQuery.extend({},w,{Target:{AnnotationPath:""}});x[u]=jQuery.extend({},w,{Inline:{Bool:"true"},Determining:{Bool:"false"},Action:{String:""},InvocationGrouping:{}});x[I]=jQuery.extend({},w,{Inline:{Bool:"true"},Determining:{Bool:"false"},Action:{String:""},SemanticObject:{String:""},Value:{Path:""}});x[v]=jQuery.extend({},w,{Inline:{Bool:"true"},Determining:{Bool:"false"},Action:{String:""},SemanticObject:{String:""}});var N={"com.sap.vocabularies.UI.v1.Importance":{"EnumMember":"com.sap.vocabularies.UI.v1.ImportanceType/High"},"RecordType":R};jQuery.extend(true,N,x[R]);for(P in N){if(P!=="RecordType"&&O&&O[P]){jQuery.extend(N[P],O[P]);}if(jQuery.isEmptyObject(N[P])){delete N[P];}}return N;};a.createNewDataPointForColumn=function(w,Q,T){var V="com.sap.vocabularies.UI.v1.VisualizationType/"+Q,R=C.getLineItemRecordForColumn(w);var N={TargetValue:{String:T},Visualization:{EnumMember:V},RecordType:n+"Type",Title:{String:Q}};if(R&&R.Value&&R.Value.Path&&(R.RecordType===o||R.RecordType===I||R.RecordType===r)){N.Value={Path:R.Value.Path};}return N;};a.fixQualifierForNewColumn=function(w,T,B){var x=C.getLineItems(w),y=C.getLineItemRecordIndex(w,x),z=D.fixQualifierForAnnotationPath(x,T,B,y);return z;};a.getColumnTypeValues=function(w){var V={DataField:{displayName:"Data Field"},DataFieldWithUrl:{displayName:"Data Field with URL"},Contact:{displayName:"Contact"},DataFieldForAction:{displayName:"Inline Action"},DataFieldWithIntentBasedNavigation:{displayName:"Navigation Field"},DataFieldWithNavigationPath:{displayName:"Data Field with Nav Path"},DataFieldForIntentBasedNavigation:{displayName:"Navigation Button"},ConnectedFields:{displayName:"Connected Fields"},RatingIndicator:{displayName:"Rating Indicator"},ProgressIndicator:{displayName:"Progress Indicator"},Chart:{displayName:"Chart"}};return V;};a.getColumnType=function(E){var R=C.getLineItemRecordForColumn(E),w;if(!R){return w;}switch(R.RecordType){case u:if(R.Inline&&R.Determining!==true){w=k;}else{w=m;}break;case t:var x=R.Target.AnnotationPath;if(x){if(x.indexOf(n)>=0){var y=C.getEntityTypeFromAnnotationPath(E,x);var Q=x.search("#");var z=x.substring(Q);var B=z?n+z:n;var G=y[B];if(G){if(G.Visualization.EnumMember==="com.sap.vocabularies.UI.v1.VisualizationType/Rating"){w=e;}if(G.Visualization.EnumMember==="com.sap.vocabularies.UI.v1.VisualizationType/Progress"){w=f;}}}else if(R.Target.AnnotationPath.indexOf(q)>=0){w=g;}else if(R.Target.AnnotationPath.indexOf(p)>=0){w=d;}else if(R.Target.AnnotationPath.indexOf(F)>=0){w=c;}}break;case I:w=h;break;case v:if(R.Inline&&R.Determining!==true){w=i;}else{w=m;}break;case o:w=b;break;case r:w=l;break;case s:w=j;break;default:break;}return w;};a.setColumnType=function(w,N){var O=a.getColumnType(w);if(O===N){return;}var x=[],y={},E={},R,z,B={},T=C.getEntityType(C.getComponent(w));switch(N){case b:R=o;break;case l:R=r;break;case k:R=u;break;case h:R=I;break;case i:R=v;break;case j:R=s;break;case c:M=C.getLineItems(w);P=C.getLineItemRecordIndex(w,M);S=M[P]?M[P]:{};z=a.fixQualifierForNewColumn(w,F,"DTAGroup",E);var G=C.createNewFieldGroup(S);y=A.createCustomAnnotationTermChange(T,G,{},z);x.push(y);R=t;break;case d:z=a.fixQualifierForNewColumn(w,p,undefined,E);var Q=z.split("#")[1];var H=Q?"#Chart"+Q:"#Chart";var J=D.createNewChart(H);y=A.createCustomAnnotationTermChange(T,J,{},z);x.push(y);var B=D.createNewDataPointForChart();y=A.createCustomAnnotationTermChange(T,B,{},n+H);x.push(y);R=t;break;case g:z=a.fixQualifierForNewColumn(w,q,undefined,E);var K=D.createNewContact();y=A.createCustomAnnotationTermChange(T,K,{},z);x.push(y);R=t;break;case e:z=a.fixQualifierForNewColumn(w,n,"Rating",E);B=a.createNewDataPointForColumn(w,"Rating","4");y=A.createCustomAnnotationTermChange(T,B,{},z);x.push(y);R=t;break;case f:z=a.fixQualifierForNewColumn(w,n,"Progress",E);B=a.createNewDataPointForColumn(w,"Progress","100");y=A.createCustomAnnotationTermChange(T,B,{},z);x.push(y);R=t;break;default:break;}if(!R){return;}var M=C.getLineItems(w);var P=C.getLineItemRecordIndex(w,M);if(P===-1){throw"invalid index for old column";}var S=M[P];var U=[];U.push.apply(U,M);var V=a.createNewColumn(R,S);switch(N){case e:case f:case d:case c:V.Target={AnnotationPath:"@"+z};break;case g:V.Target={AnnotationPath:"@"+z};if(!V.Label){V.Label={"String":"New Contact"};}break;default:break;}D._setP13nData(w,V);U.splice(P,1,V);y=A.createCustomAnnotationTermChange(T,U,M,L);x.push(y);return x;};return a;});
