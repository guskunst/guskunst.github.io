/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/core/Element","sap/ui/core/Core","sap/ui/unified/Calendar","sap/ui/core/format/NumberFormat","sap/m/Label","sap/m/Text","sap/m/Title","sap/m/Dialog","sap/m/Button","sap/m/Input","sap/m/FlexBox","sap/m/FlexDirection","sap/m/FlexItemData","sap/m/ScrollContainer","sap/m/ComboBox","sap/m/RadioButton","sap/m/RadioButtonGroup","sap/m/CheckBox","sap/m/Slider","sap/m/ResponsiveScale","sap/m/StepInput","sap/m/DatePicker","sap/m/BusyDialog","sap/m/MessageStrip","sap/m/Switch","sap/m/Panel","sap/m/TextArea","sap/gantt/misc/Format","sap/gantt/simple/GanttChartContainer","sap/gantt/config/TimeHorizon","sap/gantt/axistime/FullScreenStrategy","sap/ui/core/Item","sap/ui/core/HTML","sap/ui/layout/VerticalLayout","sap/ui/layout/HorizontalLayout","sap/ui/layout/GridData","sap/ui/layout/form/SimpleForm","sap/ui/model/json/JSONModel","sap/ui/core/theming/Parameters","sap/ui/core/ResizeHandler","sap/gantt/thirdparty/jspdf","sap/gantt/thirdparty/html2canvas"],function($,E,C,a,N,L,T,b,D,B,I,F,c,d,S,e,R,f,g,h,j,k,l,m,M,n,P,o,p,G,q,r,s,H,V,t,u,v,J,w,x,y,z){"use strict";z=window.html2canvas;y=window.jsPDF;var A=E.extend("sap.gantt.simple.GanttPrinting",{metadata:{associations:{ganttChart:{type:"sap.gantt.simple.GanttChartWithTable",multiple:false}}}});A._oPaperSizes={"A5":{width:U(148),height:U(210)},"A4":{width:U(210),height:U(297)},"A3":{width:U(297),height:U(420)},"A2":{width:U(420),height:U(594)},"A1":{width:U(594),height:U(841)},"A0":{width:U(841),height:U(1189)},"Letter":{width:X(8.5),height:X(11)},"Legal":{width:X(8.5),height:X(14)},"Tabloid":{width:X(11),height:X(17)},"Custom":{width:undefined,height:undefined}};var K="9px Arial, Helvetica, sans-serif";var O="12px Arial, Helvetica, sans-serif";var Q="16384";A.prototype.init=function(){this._oRb=C.getLibraryResourceBundle("sap.gantt");var i={"multiplePage":true,"portrait":true,"paperSize":"A4","paperWidth":A._oPaperSizes.A4.width,"paperHeight":A._oPaperSizes.A4.height,"unit":"mm","repeatSelectionPanel":false,"scale":100,"duration":"all","startDate":new Date(),"endDate":new Date(),"showPageNumber":false,"showHeaderText":false,"headerText":"","showFooterText":false,"footerText":"","exportAll":true,"exportRange":"","exportAsJPEG":true,"compressionQuality":75,"previewPageNumber":1,"lastPageNumber":undefined,"marginType":"default","marginLocked":false,"marginTop":U(5),"marginRight":U(5),"marginBottom":U(5),"marginLeft":U(5),"cropMarks":false,"cropMarksWeight":0.25,"cropMarksOffset":U(3)};this._oModel=new J(i);this._oGanttCanvas=undefined;var _=new a();this._iFirstDayOfWeek=_._getLocaleData().getFirstDayOfWeek();this._iHeaderAndFooterHeight=U(8);this._ganttChartContainer=new G();};A.prototype.export=function(){this._savePdf();};A.prototype.open=function(){if(!this.getGanttChart()||!this._getOriginalGanttChart().isA("sap.gantt.simple.GanttChartWithTable")){throw new Error("Association 'ganttChart' of type 'sap.gantt.simple.GanttChartWithTable' is not set");}this._createAndOpenDialog();this._drawClonedGantt();this._oFlexBoxPreview.setBusy(true);this._createGanttCanvas().then(function(i){this._oGanttCanvas=i;return this._updateGanttCanvas();}.bind(this)).then(function(){this._oFlexBoxPreview.setBusy(false);}.bind(this));};A.prototype.close=function(){this._ganttChartClone.destroy();this._ganttChartClone=null;this._ganttChartContainer.destroy();this._ganttChartContainer=null;document.body.removeChild(this._oClonedGanttDiv);x.deregister(this._sResizeHandlerId);this._oDialog.close();this._oDialog.destroy();};A.prototype.setGanttChart=function(i){this.setAssociation("ganttChart",i);this._ganttChartClone=i.clone();this._ganttChartContainer.setParent(this._getOriginalGanttChart(),"originalGanttChart");this._ganttChartClone.mEventRegistry={};this._ganttChartClone.setHeight("100%");this._ganttChartClone.setSelectionPanelSize(i._iLastTableAreaSize.toString()+"px");var _=i.getAxisTimeStrategy();if(!_.isA("sap.gantt.axistime.FullScreenStrategy")){var a1=i._getScrollExtension();a1._updateVisibleHorizonForce();}var b1=_.getVisibleHorizon();var c1=this._getHorizonDates(b1);var d1=this._horizonWidthInSec(c1);this._fPixelsBySec=i.getVisibleWidth()/d1;if(!_.isA("sap.gantt.axistime.FullScreenStrategy")){var e1=_.getTotalHorizon();var f1=new r({totalHorizon:new q({startTime:e1.getStartTime(),endTime:e1.getEndTime()}),visibleHorizon:new q({startTime:e1.getStartTime(),endTime:e1.getEndTime()})});this._ganttChartClone.setAxisTimeStrategy(f1);}this._ganttChartContainer.addGanttChart(this._ganttChartClone);return this;};A.prototype._onResize=function(){var i=this._oHTMLDialogPreview.getDomRef();i.style.overflow="hidden";this._resizePrintingPreviewPage();i.style.overflow="visible";};function U(i){return i*3.78;}function W(i){return i/3.78;}function X(i){return i/0.01042;}function Y(i){return i*0.01042;}A.prototype._convertUnitToPx=function(i){var _=this._oModel.getProperty("/unit");if(!_){return undefined;}switch(_){case"mm":return U(i);case"cm":return U(i)*10;case"in":return X(i);default:return undefined;}};A.prototype._convertPxToUnit=function(i){var _=this._oModel.getProperty("/unit");if(!_){return undefined;}switch(_){case"mm":return W(i);case"cm":return W(i)/10;case"in":return Y(i);default:return undefined;}};A.prototype._onChangeUnitComboBox=function(){this._updatePaperSizeInputs();this._updateMarginInputs();};A.prototype._updatePaperSizeInputs=function(){var i=this._oModel.getProperty("/paperWidth"),_=this._oModel.getProperty("/paperHeight");this._setPaperSizeInputs(i,_);};A.prototype._setPaperSizeInputs=function(i,_){if(this._oInputPaperWidth){this._oInputPaperWidth.setValue(this._convertPxToUnit(i));}if(this._oInputPaperHeight){this._oInputPaperHeight.setValue(this._convertPxToUnit(_));}};A.prototype._setPaperSizesToModel=function(i,_){this._oModel.setProperty("/paperWidth",i);this._oModel.setProperty("/paperHeight",_);};A.prototype._updatePaperSizeValues=function(){var i=this._oModel.getProperty("/paperSize"),_=this._oModel.getProperty("/portrait"),a1,b1;if(!i||i==="Custom"){return;}var c1=A._oPaperSizes[i];if(_){a1=c1.width;b1=c1.height;}else{a1=c1.height;b1=c1.width;}this._setPaperSizeInputs(a1,b1);this._setPaperSizesToModel(a1,b1);if(i==="Letter"||i==="Legal"||i==="Tabloid"){this._oComboBoxUnit.setSelectedKey("in");}else{this._oComboBoxUnit.setSelectedKey("mm");}this._onChangeUnitComboBox();this._updateDialogPreview();};A.prototype._updatePaperOrientation=function(i){var _=this._oModel.getProperty("/paperWidth"),a1=this._oModel.getProperty("/paperHeight");if(a1>_){this._oModel.setProperty("/portrait",true);this._radioGroupOrientation.setSelectedIndex(0);}else{this._oModel.setProperty("/portrait",false);this._radioGroupOrientation.setSelectedIndex(1);}};A.prototype._onChangePaperSizeInput=function(i){var _=i.getSource();var a1=this._convertUnitToPx(N.getFloatInstance().parse(_.getValue()));if(_===this._oInputPaperWidth){this._oModel.setProperty("/paperWidth",a1);}else{this._oModel.setProperty("/paperHeight",a1);}this._oComboBoxPaperSizes.setSelectedKey("Custom");this._updatePaperOrientation();this._updateDialogPreview();};A.prototype._onChangeCompressionSlider=function(i){var _=i.getSource();var a1=_.getValue();this._setCompressionComboBoxItem(a1);};A.prototype._setCompressionComboBoxItem=function(i){if(i===100){this._oComboBoxCompression.setSelectedKey("maximum");}else if(i>=75){this._oComboBoxCompression.setSelectedKey("high");}else if(i>=50){this._oComboBoxCompression.setSelectedKey("medium");}else{this._oComboBoxCompression.setSelectedKey("low");}};A.prototype._onChangeCompressionComboBox=function(i){var _=i.getSource().getSelectedKey();var a1={maximum:100,high:75,medium:50,low:25};this._oModel.setProperty("/compressionQuality",a1[_]);};A.prototype._onChangeOrientation=function(){var i=this._oModel.getProperty("/paperWidth"),_=this._oModel.getProperty("/paperHeight");this._setPaperSizeInputs(_,i);this._setPaperSizesToModel(_,i);this._updateDialogPreview();};A.prototype._onChangeExportTypes=function(){this._updateDialogPreview();};A.prototype._setMarginInputs=function(i,_,a1,b1){this._oInputMarginTop.setValue(this._convertPxToUnit(i));this._oInputMarginRight.setValue(this._convertPxToUnit(_));this._oInputMarginBottom.setValue(this._convertPxToUnit(a1));this._oInputMarginLeft.setValue(this._convertPxToUnit(b1));};A.prototype._setMarginsToModel=function(i,_,a1,b1){if(i!==undefined){this._oModel.setProperty("/marginTop",i);}if(_!==undefined){this._oModel.setProperty("/marginRight",_);}if(a1!==undefined){this._oModel.setProperty("/marginBottom",a1);}if(b1!==undefined){this._oModel.setProperty("/marginLeft",b1);}};A.prototype._onChangeMarginComboBox=function(i){var _=i.getSource().getSelectedKey();var a1=U(5);if(_==="none"){a1=0;}this._setMarginsToModel(a1,a1,a1,a1);this._setMarginInputs(a1,a1,a1,a1);this._updateDialogPreview();};A.prototype._updateModelFromMarginInputs=function(){var i,_,a1,b1;if(this._oInputMarginTop.getValueState()!=="Error"){i=this._convertUnitToPx(this._oInputMarginTop.getValue());}if(this._oInputMarginRight.getValueState()!=="Error"){_=this._convertUnitToPx(this._oInputMarginRight.getValue());}if(this._oInputMarginBottom.getValueState()!=="Error"){a1=this._convertUnitToPx(this._oInputMarginBottom.getValue());}if(this._oInputMarginLeft.getValueState()!=="Error"){b1=this._convertUnitToPx(this._oInputMarginLeft.getValue());}this._setMarginsToModel(i,_,a1,b1);};A.prototype._updateMarginInputs=function(){var i=this._oModel.getProperty("/marginTop");var _=this._oModel.getProperty("/marginRight");var a1=this._oModel.getProperty("/marginBottom");var b1=this._oModel.getProperty("/marginLeft");this._setMarginInputs(i,_,a1,b1);};A.prototype._updateCropMarksOffsetInput=function(){var i=this._oModel.getProperty("/cropMarksOffset");this._oInputCropMarksOffset.setValue(this._convertPxToUnit(i));};A.prototype._onChangeMarginInput=function(i){var _=i.getSource();if(_.getValueState()==="Error"){return;}if(this._oModel.getProperty("/marginLocked")){var a1=this._convertUnitToPx(_.getValue());this._setMarginInputs(a1,a1,a1,a1);this._setMarginsToModel(a1,a1,a1,a1);}else{this._updateModelFromMarginInputs();}this._updateDialogPreview();};A.prototype._onChangeCropMarksInput=function(i){var _=i.getSource();var a1=this._convertUnitToPx(_.getValue());this._oInputCropMarksOffset.setValue(this._convertPxToUnit(a1));this._oModel.setProperty("/cropMarksOffset",a1);};A.prototype._allRange=function(){this._oModel.setProperty("/startDate",this._oDatePickerFrom.getMinDate());this._oModel.setProperty("/endDate",this._oDatePickerTo.getMaxDate());};A.prototype._getFirstDayOfNextWeek=function(i){var _=(this._iFirstDayOfWeek+7-i.getDay())%7;return new Date(i.getFullYear(),i.getMonth(),i.getDate()+(_===0?7:_));};A.prototype._nextWeekRange=function(){var i=new Date();var _=this._getFirstDayOfNextWeek(i);this._oModel.setProperty("/startDate",this._validateDate(_));this._oModel.setProperty("/endDate",this._validateDate(new Date(_.getFullYear(),_.getMonth(),_.getDate()+7)));};A.prototype._getFirstDayOfNextMonth=function(i){return new Date(i.getFullYear(),i.getMonth()+1,1);};A.prototype._nextMonthRange=function(){var i=new Date();this._oModel.setProperty("/startDate",this._validateDate(this._getFirstDayOfNextMonth(i)));this._oModel.setProperty("/endDate",this._validateDate(new Date(i.getFullYear(),i.getMonth()+2,1)));};A.prototype._validateDate=function(i){var _=this._oDatePickerTo.getMaxDate(),a1=this._oDatePickerFrom.getMinDate();if(i.getTime()>_.getTime()){return _;}if(i.getTime()<a1.getTime()){return a1;}return i;};A.prototype._onChangeDurationComboBox=function(){var i=this._oModel.getProperty("/duration");switch(i){case"all":{this._allRange();}break;case"week":{this._nextWeekRange();}break;case"month":{this._nextMonthRange();}break;case"custom":default:return;}this._updateGanttCanvas();};A.prototype._onChangeDurationDatePicker=function(){this._oComboBoxDuration.setSelectedKey("custom");this._updateGanttCanvas();};A.prototype._setEnabledPreviousButtons=function(i){this._oButtonFirst.setEnabled(i);this._oButtonPrevious.setEnabled(i);};A.prototype._setEnabledNextButtons=function(i){this._oButtonNext.setEnabled(i);this._oButtonLast.setEnabled(i);};A.prototype._updatePageNumberButtons=function(){if(!this._oGanttCanvas){this._setEnabledNextButtons(false);this._setEnabledPreviousButtons(false);return;}var i=this._oModel.getProperty("/previewPageNumber"),_=this._oModel.getProperty("/lastPageNumber");if(!_){_=Number.MAX_SAFE_INTEGER;}if(i<=1){this._setEnabledPreviousButtons(false);}if(i>=_){this._setEnabledNextButtons(false);}if(i>1){this._setEnabledPreviousButtons(true);}if(i<_){this._setEnabledNextButtons(true);}};A.prototype._getHeaderHeight=function(){var i=this._oModel.getProperty("/showHeaderText");if(i){return this._iHeaderAndFooterHeight;}return 0;};A.prototype._isFooterMultiline=function(){if(!this._oModel.getProperty("/multiplePage")){return false;}var i=this._oModel.getProperty("/showPageNumber"),_=this._oModel.getProperty("/showFooterText");if(!_||!i){return false;}var a1=this._oModel.getProperty("/footerText"),b1=this._oModel.getProperty("/paperWidth"),c1;var d1=C.getConfiguration().getRTL();if(d1){c1=this._oModel.getProperty("/marginRight");}else{c1=this._oModel.getProperty("/marginLeft");}var e1=7;var f1=this._oGanttCanvas.getContext("2d");f1.font=K;var g1=f1.measureText(a1).width;if(b1/2>(c1+U(4)+g1+U(10)+e1)){return false;}else{return true;}};A.prototype._getFooterHeight=function(){var i=this._oModel.getProperty("/showPageNumber"),_=this._oModel.getProperty("/showFooterText");if(_&&i){return this._isFooterMultiline()?2*this._iHeaderAndFooterHeight:this._iHeaderAndFooterHeight;}if(_||i){return this._iHeaderAndFooterHeight;}return 0;};A.prototype._isShrinkableToOnePageByWidth=function(){var i=this._getPaperContentWidth()/this._getPaperContentHeight(),_=this._oGanttCanvas.width/this._oGanttCanvas.height;return i<=_;};A.prototype._getPaperContentWidth=function(){var i=this._oModel.getProperty("/paperWidth"),_=this._oModel.getProperty("/marginLeft"),a1=this._oModel.getProperty("/marginRight");return i-_-a1;};A.prototype._getPaperContentHeight=function(){var i=this._oModel.getProperty("/paperHeight"),_=this._oModel.getProperty("/marginTop"),a1=this._oModel.getProperty("/marginBottom");return i-_-this._getHeaderHeight()-a1-this._getFooterHeight();};A.prototype._getScale=function(){return 100/this._oModel.getProperty("/scale");};A.prototype._getCroppingWidth=function(){return this._getScale()*this._getPaperContentWidth();};A.prototype._getCroppingHeight=function(){return this._getScale()*this._getPaperContentHeight();};A.prototype._getPagesInARow=function(){return Math.ceil(this._oGanttCanvas.width/this._getCroppingWidth());};A.prototype._getPagesInAColumn=function(){return Math.ceil(this._oGanttCanvas.height/this._getCroppingHeight());};A.prototype._updateLastPageNumber=function(){if(!this._oGanttCanvas){return;}var i=this._getPagesInARow()*this._getPagesInAColumn();this._oModel.setProperty("/lastPageNumber",i);var _=this._oModel.getProperty("/previewPageNumber");if(_>i){this._oModel.setProperty("/previewPageNumber",i);}};A.prototype._onPressButtonFirst=function(){this._oModel.setProperty("/previewPageNumber",1);this._updatePageNumberButtons();this._updateDialogPreviewCanvas();};A.prototype._onPressButtonPrevious=function(){var i=this._oModel.getProperty("/previewPageNumber");this._oModel.setProperty("/previewPageNumber",i-1);this._updatePageNumberButtons();this._updateDialogPreviewCanvas();};A.prototype._onPressButtonNext=function(){var i=this._oModel.getProperty("/previewPageNumber");this._oModel.setProperty("/previewPageNumber",i+1);this._updatePageNumberButtons();this._updateDialogPreviewCanvas();};A.prototype._onPressButtonLast=function(){var i=this._oModel.getProperty("/lastPageNumber");if(!i){return;}this._oModel.setProperty("/previewPageNumber",i);this._updatePageNumberButtons();this._updateDialogPreviewCanvas();};A.prototype._getOriginalGanttChart=function(){return sap.ui.getCore().byId(this.getAssociation("ganttChart"));};A.prototype._setGanttCloneDivWidth=function(){var i=this._ganttChartClone.getAxisTimeStrategy(),_=i.getTotalHorizon(),a1=this._getHorizonDates(_),b1=this._horizonWidthInSec(a1),c1=Math.ceil(this._fPixelsBySec*b1);this._oClonedGanttDiv.style.width=(this._getOriginalGanttChart()._iLastTableAreaSize+c1+10).toString()+"px";};A.prototype._setGanttCloneDivHeight=function(){var i=this._getOriginalGanttChart().getTable();var _=i._getTotalRowCount(),a1=i._aRowHeights;var b1=a1.reduce(function(d1,e1){return d1+e1;});var c1=Math.ceil((b1/a1.length)*_);this._oClonedGanttDiv.style.height=(c1+100).toString()+"px";};A.prototype._createImgElementsFromSvgImages=function(){var _=this._ganttChartClone.$().find("svg.sapGanttChartSvg");if(!_.length){return;}var a1=this._ganttChartClone.$().find(".sapGanttChartCnt")[0];if(!a1){return;}a1.style.position="relative";var b1=_.find("image");for(var i=0;i<b1.length;i++){var c1=b1[i];var d1=document.createElement("img");d1.src=c1.getAttribute("xlink:href");d1.style.position="absolute";d1.style.top=c1.getAttribute("y")+"px";d1.style.left=c1.getAttribute("x")+"px";d1.style.width=c1.getAttribute("width")+"px";d1.style.height=c1.getAttribute("height")+"px";a1.appendChild(d1);}};A.prototype._createGanttCanvas=function(){this._setStyleToGanttChartSvg(this._ganttChartClone);this._createImgElementsFromSvgImages();return z(this._oClonedGanttDiv,{allowTaint:true,scale:1,logging:false});};A.prototype._updateGanttCanvas=function(){var i=this._oModel;var _=this._ganttChartClone.getAxisTimeStrategy();_.getTotalHorizon().setStartTime(i.getProperty("/startDate"));_.getTotalHorizon().setEndTime(i.getProperty("/endDate"));_.getVisibleHorizon().setStartTime(i.getProperty("/startDate"));_.getVisibleHorizon().setEndTime(i.getProperty("/endDate"));this._setGanttCloneDivWidth();this._ganttChartContainer.rerender();if(this._oClonedGanttDiv.offsetWidth>Q){if(this._oGanttCanvas){delete this._oGanttCanvas;this._oGanttCanvas=null;}this._oFlexBoxPreview.setBusy(false);this._updateDialogPreview();return Promise.resolve();}this._oFlexBoxPreview.setBusy(true);return this._createGanttCanvas().then(function(a1){this._oGanttCanvas=a1;this._updateDialogPreview();this._oFlexBoxPreview.setBusy(false);}.bind(this)).catch(function(){this._oFlexBoxPreview.setBusy(false);}.bind(this));};A.prototype._drawClonedGantt=function(){if(this._oClonedGanttDiv){return;}this._oClonedGanttDiv=document.createElement("div");this._oClonedGanttDiv.id="clonedGanttDiv";this._oClonedGanttDiv.style.position="absolute";this._oClonedGanttDiv.style.top="-17000px";this._oClonedGanttDiv.style.left="-17000px";document.body.appendChild(this._oClonedGanttDiv);this._setGanttCloneDivWidth();this._setGanttCloneDivHeight();var i=this._oModel;var _=this._ganttChartClone.getAxisTimeStrategy();_.getVisibleHorizon().setStartTime(i.getProperty("/startDate"));_.getVisibleHorizon().setEndTime(i.getProperty("/endDate"));var a1=sap.ui.getCore().createRenderManager();a1.renderControl(this._ganttChartContainer);a1.flush(this._oClonedGanttDiv);a1.destroy();this._ganttChartContainer.rerender();sap.ui.getCore().applyChanges();};A.prototype._resizePrintingPreviewPage=function(){var i=this._oHTMLDialogPreview.getDomRef(),_=this._oHTMLDialogPreview.$().find(".sapGanttPrintingPreviewPageDiv")[0],a1=i.offsetHeight,b1=this._oModel.getProperty("/paperHeight"),c1=this._oModel.getProperty("/paperWidth"),d1=this._oModel.getProperty("/portrait"),e1,f1;if(d1){e1=a1/b1;f1=c1*e1;}else{e1=a1/c1;f1=a1;a1=b1*e1;}_.style.width=f1.toString()+"px";_.style.height=a1.toString()+"px";};A.prototype._getCanvasOfPageN=function(i,_){var a1=this._oModel.getProperty("/lastPageNumber");if(i>a1){return null;}var b1=document.createElement("canvas");var c1=b1.getContext("2d");c1.imageSmoothingEnabled=false;var d1=this._getCroppingWidth(),e1=this._getCroppingHeight();var f1=this._getPagesInARow();var g1=this._oModel.getProperty("/paperWidth"),h1=this._oModel.getProperty("/paperHeight");var i1=this._oModel.getProperty("/marginTop"),j1=this._oModel.getProperty("/marginRight"),k1=this._oModel.getProperty("/marginBottom"),l1=this._oModel.getProperty("/marginLeft");var m1=(i-1)%f1,n1=Math.floor((i-1)/f1);b1.width=g1;b1.height=h1;if(!_){b1.style.height="100%";b1.style.width="auto";}c1.fillStyle="white";c1.fillRect(0,0,b1.width,b1.height);c1.fillStyle=w.get("sapUiBaseText");c1.textBaseline="middle";c1.font=K;var o1;var p1=C.getConfiguration().getRTL();if(p1){c1.textAlign="right";o1=g1-j1-U(4);}else{c1.textAlign="left";o1=l1+U(4);}var q1=this._oModel.getProperty("/showHeaderText");if(q1){var r1=this._oModel.getProperty("/headerText");c1.fillText(r1,o1,i1+(this._iHeaderAndFooterHeight/2));}if(this._oModel.getProperty("/showFooterText")){c1.fillText(this._oModel.getProperty("/footerText"),o1,h1-k1-(this._iHeaderAndFooterHeight/2)-(this._isFooterMultiline()?this._iHeaderAndFooterHeight:0));}var s1=this._oModel.getProperty("/showPageNumber"),t1=this._oModel.getProperty("/multiplePage");if(t1&&s1){c1.font=O;c1.textAlign="center";c1.fillText(i.toString(),g1/2,h1-k1-(this._iHeaderAndFooterHeight/2));}if(t1){var u1=m1*d1,v1=n1*e1,w1=0,x1=0;var y1=false;if((u1+d1)>this._oGanttCanvas.width){y1=true;d1=(this._oGanttCanvas.width-u1);x1=d1/this._getScale();}var z1=false;if((v1+e1)>this._oGanttCanvas.height){z1=true;e1=(this._oGanttCanvas.height-v1);w1=e1/this._getScale();}c1.drawImage(this._oGanttCanvas,u1,v1,d1,e1,l1,i1+this._getHeaderHeight(),y1?x1:this._getPaperContentWidth(),z1?w1:this._getPaperContentHeight());}else{var A1=this._getPaperContentWidth(),B1=this._getPaperContentHeight();var C1=this._isShrinkableToOnePageByWidth();var D1;if(C1){D1=A1/this._oGanttCanvas.width;B1=this._oGanttCanvas.height*D1;}else{D1=B1/this._oGanttCanvas.height;A1=this._oGanttCanvas.width*D1;}c1.drawImage(this._oGanttCanvas,0,0,this._oGanttCanvas.width,this._oGanttCanvas.height,l1,i1+this._getHeaderHeight(),A1,B1);}return b1;};function Z(i){while(i.firstChild){i.removeChild(i.firstChild);}}A.prototype._createPreviewErrorMessageStrip=function(){return new M({text:this._oRb.getText("GNT_PRNTG_ERROR_BIGCHART"),showIcon:true,type:"Error"});};A.prototype._updateDialogPreviewCanvas=function(){var i=this._oHTMLDialogPreview.$().find(".sapGanttPrintingPreviewPageDiv");var _=i[0];if(this._oGanttCanvas){this._oButtonExport.setEnabled(true);var a1=this._oModel.getProperty("/multiplePage");var b1=this._getCanvasOfPageN(a1?this._oModel.getProperty("/previewPageNumber"):1,false);Z(_);this._resizePrintingPreviewPage();_.appendChild(b1);}else if(!this._oGanttCanvas&&this._oClonedGanttDiv.offsetWidth>Q){this._oButtonExport.setEnabled(false);this._resizePrintingPreviewPage();if(!this._oHTMLDialogPreview.$().find("#"+this.getId()+"-previewErrorMessageStrip").length){Z(_);if(!this._oPreviewErrorMessageStrip){this._oPreviewErrorMessageStrip=this._createPreviewErrorMessageStrip();}var c1=document.createElement("div");c1.id=this.getId()+"-previewErrorMessageStrip";c1.style.width="80%";_.appendChild(c1);this._oPreviewErrorMessageStrip.placeAt(this.getId()+"-previewErrorMessageStrip");}}else{throw new Error("Gantt chart canvas does not exist.");}i.addClass("sapGanttPrintingPreviewPageDivBorder");};A.prototype._updateDialogPreview=function(){this._updateLastPageNumber();this._updatePageNumberButtons();this._updateDialogPreviewCanvas();};A.prototype._setStylesToDom=function(_){function a1(c1){var d1=getComputedStyle(c1);var i,e1,f1,g1;var h1=["height","width","min-height","min-width"];var i1="";for(i=0,e1=d1.length;i<e1;i++){f1=d1[i];if(!((c1 instanceof SVGElement)&&h1.indexOf(f1)>=0)){g1=d1.getPropertyValue(f1);i1+=f1+":"+g1+";";}}c1.setAttribute("style",i1);}function b1(i){a1(i);c1(i);function c1(d1){if(d1&&d1.hasChildNodes()){var e1=d1.firstChild;while(e1){if(e1.nodeType===1&&e1.nodeName!="SCRIPT"){a1(e1);c1(e1);}e1=e1.nextSibling;}}}}b1(_);};A.prototype._setStyleToGanttChartSvg=function(i){var _=i.$().find("svg.sapGanttChartSvg")[0];var a1=i.$().find("svg.sapGanttChartHeaderSvg")[0];if(_){this._setStylesToDom(_);}if(a1){this._setStylesToDom(a1);}};A.prototype._getHorizonDates=function(i){var _=i.getStartTime();var a1=i.getEndTime();return{"startTime":new Date(p.abapTimestampToDate(_)),"endTime":new Date(p.abapTimestampToDate(a1))};};A.prototype._horizonWidthInSec=function(i){if(i&&i.startTime&&i.endTime){return i.endTime.getTime()-i.startTime.getTime();}return 0;};A.prototype._pageToBeExported=function(){if(!this._oModel.getProperty("/multiplePage")){return[1];}var _=this._oModel.getProperty("/lastPageNumber"),a1=this._oModel.getProperty("/exportAll"),b1=[];if(a1){for(var i=1;i<=_;i++){b1.push(i);}return b1;}else{var c1=this._oModel.getProperty("/exportRange");c1=c1.replace(/\s/g,"");var d1=N.getIntegerInstance();var e1=c1.split(",");e1.forEach(function(f1){if(f1.indexOf("-")!==-1){var g1=f1.split("-");var h1=d1.parse(g1[0]);var i1=d1.parse(g1[1]);for(var i=h1;i<=i1;i++){b1.push(i);}}else{b1.push(d1.parse(f1));}});return b1;}};A.prototype._validateFields=function(){var i=true;i&=this._validateExportRangeInput();i&=(this._oInputMarginTop.getValueState()!=="Error");i&=(this._oInputMarginRight.getValueState()!=="Error");i&=(this._oInputMarginBottom.getValueState()!=="Error");i&=(this._oInputMarginLeft.getValueState()!=="Error");return i;};A.prototype._savePdf=function(){if(!this._validateFields()){return;}var _=this._oModel.getProperty("/portrait")?"p":"l",a1=this._oModel.getProperty("/paperWidth"),b1=this._oModel.getProperty("/paperHeight"),c1=this._oModel.getProperty("/exportAsJPEG"),d1=this._oModel.getProperty("/compressionQuality")/100,e1=this._oModel.getProperty("/paperSize");var f1=new y({orientation:_,unit:"px",format:e1==="Custom"?[a1*0.75,b1*0.75]:e1.toLowerCase()});var g1=this._pageToBeExported();for(var i=0;i<g1.length;i++){var h1=this._getCanvasOfPageN(g1[i],true);if(!h1){continue;}if(i!==0){f1.addPage();}if(c1){f1.addImage(h1.toDataURL("image/jpeg",d1),"JPEG",0,0);}else{f1.addImage(h1.toDataURL("image/png"),"PNG",0,0);}}var i1=new Date();f1.save("GanttChartExport-"+i1.toISOString()+".pdf");};A.prototype._createPaperComboBox=function(){this._oComboBoxPaperSizes=new e({selectedKey:"{setting>/paperSize}",change:this._updatePaperSizeValues.bind(this),items:[new s({key:"A5",text:"A5"}),new s({key:"A4",text:"A4"}),new s({key:"A3",text:"A3"}),new s({key:"A2",text:"A2"}),new s({key:"A1",text:"A1"}),new s({key:"A0",text:"A0"}),new s({key:"Letter",text:"Letter"}),new s({key:"Legal",text:"Legal"}),new s({key:"Tabloid",text:"Tabloid"}),new s({key:"Custom",text:"Custom"})]});return this._oComboBoxPaperSizes;};A.prototype._createPaperSizeFields=function(){this._oInputPaperWidth=new I({width:"20%",type:"Number",change:this._onChangePaperSizeInput.bind(this)});this._oInputPaperHeight=new I({width:"20%",type:"Number",change:this._onChangePaperSizeInput.bind(this)});this._updatePaperSizeInputs();return new F({renderType:"Bare",alignItems:"Center",justifyContent:"SpaceBetween",items:[this._oInputPaperWidth,new T({text:"×"}),this._oInputPaperHeight,this._oComboBoxUnit=new e({width:"50%",selectedKey:"{setting>/unit}",change:this._onChangeUnitComboBox.bind(this),items:[new s({key:"mm",text:this._oRb.getText("GNT_PRNTG_MILLIMETERS")}),new s({key:"cm",text:this._oRb.getText("GNT_PRNTG_CENTIMETERS")}),new s({key:"in",text:this._oRb.getText("GNT_PRNTG_INCHES")})]})]});};A.prototype._createDurationComboBox=function(){var i=this._getOriginalGanttChart().getAxisTimeStrategy(),_=i.getTotalHorizon(),a1=new Date(p.abapTimestampToDate(_.getEndTime())),b1=new Date();this._oComboBoxDuration=new e({selectedKey:"{setting>/duration}",change:this._onChangeDurationComboBox.bind(this),items:[new s({key:"all",text:this._oRb.getText("GNT_PRNTG_DURATION_ALL")}),new s({key:"week",enabled:this._getFirstDayOfNextWeek(b1).getTime()<a1.getTime(),text:this._oRb.getText("GNT_PRNTG_DURATION_NEXT_WEEK")}),new s({key:"month",enabled:this._getFirstDayOfNextMonth(b1).getTime()<a1.getTime(),text:this._oRb.getText("GNT_PRNTG_DURATION_NEXT_MONTH")}),new s({key:"custom",text:this._oRb.getText("GNT_PRNTG_DURATION_CUSTOM")})]});return this._oComboBoxDuration;};A.prototype._createDatePicker=function(){var i=this._getOriginalGanttChart().getAxisTimeStrategy();var _=i.getTotalHorizon();var a1=new Date(p.abapTimestampToDate(_.getStartTime()));var b1=new Date(p.abapTimestampToDate(_.getEndTime()));this._oModel.setProperty("/startDate",a1);this._oModel.setProperty("/endDate",b1);this._oDatePickerFrom=new l({width:"47%",minDate:a1,maxDate:"{setting>/endDate}",dateValue:"{setting>/startDate}",change:this._onChangeDurationDatePicker.bind(this),enabled:true});this._oDatePickerTo=new l({width:"47%",minDate:"{setting>/startDate}",maxDate:b1,dateValue:"{setting>/endDate}",change:this._onChangeDurationDatePicker.bind(this),enabled:true});return new F({renderType:"Bare",alignItems:"Center",justifyContent:"SpaceBetween",items:[this._oDatePickerFrom,new T({text:"~"}),this._oDatePickerTo]});};A.prototype._createScale=function(){return new h({min:50,max:200,step:1,width:"25rem",value:"{setting>/scale}",visible:"{setting>/multiplePage}",liveChange:this._updateDialogPreview.bind(this),showAdvancedTooltip:true,inputsAsTooltips:true});};A.prototype._validateExportRangeInput=function(){if(this._oModel.getProperty("/exportAll")){return true;}var i=this._oModel.getProperty("/exportRange").replace(/\s/g,"");if(/^((\d+),|(\d+-\d+),)*((\d+)|(\d+-\d+))+$/.test(i)){this._oInputRange.setValueState("None");return true;}this._oInputRange.setValueState("Error");this._oInputRange.setValueStateText(this._oRb.getText("GNT_PRNTG_PAGE_RANGE_ERROR"));return false;};A.prototype._createPageRange=function(){var i=function(_){var a1=_.getSource().getSelectedIndex();if(a1===0){this._oButtonExport.setEnabled(true);this._oInputRange.setValueState("None");}};return new F({renderType:"Bare",alignItems:"Center",visible:"{setting>/multiplePage}",justifyContent:"SpaceBetween",items:[new f({layoutData:new d({shrinkFactor:0,growFactor:1}),selectedIndex:this._oModel.getProperty("/exportAll")?0:1,columns:2,select:i.bind(this),buttons:[new R({id:"all",text:this._oRb.getText("GNT_PRNTG_PAGE_RANGE_ALL"),selected:"{setting>/exportAll}"}),new R({id:"range",text:this._oRb.getText("GNT_PRNTG_PAGE_RANGE_RANGE")+" "})]}),this._oInputRange=new I({layoutData:new d({growFactor:1}),value:"{setting>/exportRange}",change:this._validateExportRangeInput.bind(this),enabled:{path:"setting>/exportAll",formatter:function(_){return!_;}}}).addStyleClass("sapGanttPrintingPageRangeInput")]});};A.prototype._createLabelWithSwitch=function(i,_){return new F({renderType:"Bare",visible:"{setting>/multiplePage}",alignItems:"Center",items:[new L({text:i}),new n({state:_,change:this._updateDialogPreviewCanvas.bind(this)}).addStyleClass("sapGanttPrintingSwitchPadding")]});};A.prototype._createCheckBoxWithInput=function(i,_,a1){return new F({renderType:"Bare",alignItems:"Start",justifyContent:"SpaceBetween",items:[new g({selected:_,text:i,select:this._updateDialogPreviewCanvas.bind(this)}),new I({width:"65%",value:a1,enabled:_,change:this._updateDialogPreviewCanvas.bind(this)})]});};A.prototype._createPanel=function(i,_){return new P({expandable:true,expanded:false,headerText:i,content:[new F({renderType:"Bare",direction:c.Column,items:[_]})]});};A.prototype._createCompressionSlider=function(){return new h({min:1,max:100,step:1,change:this._onChangeCompressionSlider.bind(this),value:{path:"setting>/compressionQuality",type:"sap.ui.model.type.Integer"},visible:"{setting>/exportAsJPEG}",showAdvancedTooltip:true,inputsAsTooltips:true});};A.prototype._createCompressionComboBox=function(){this._oComboBoxCompression=new e({visible:"{setting>/exportAsJPEG}",change:this._onChangeCompressionComboBox.bind(this),items:[new s({key:"maximum",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_MAXIMUM")}),new s({key:"high",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_HIGH")}),new s({key:"medium",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_MEDIUM")}),new s({key:"low",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_LOW")})]});var i=this._oModel.getProperty("/compressionQuality");this._setCompressionComboBoxItem(i);return this._oComboBoxCompression;};A.prototype._updateInputsStep=function(i){var _=0.1;if(i==="mm"){_=1;}return _;};A.prototype._createMargin=function(){function i(_){return Math.round(this._convertPxToUnit(_/3));}return[new L({text:this._oRb.getText("GNT_PRNTG_MARGIN")+":"}),new e({change:this._onChangeMarginComboBox.bind(this),selectedKey:"{setting>/marginType}",items:[new s({key:"default",text:this._oRb.getText("GNT_PRNTG_MARGIN_DEFAULT")}),new s({key:"none",text:this._oRb.getText("GNT_PRNTG_MARGIN_NONE")}),new s({key:"custom",text:this._oRb.getText("GNT_PRNTG_MARGIN_CUSTOM")})]}),new F({renderType:"Bare",alignItems:"Center",visible:{path:"setting>/marginType",formatter:function(_){return _==="custom";}},items:[new F({direction:c.Column,layoutData:new d({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new L({text:this._oRb.getText("GNT_PRNTG_MARGIN_TOP")}),this._oInputMarginTop=new k({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginTop")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_HEIGHT_ERROR"),max:{parts:[{path:"setting>/paperHeight"},{path:"setting>/unit"}],formatter:i.bind(this)},description:"{setting>/unit}"}).addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_MARGIN_LEFT")}),this._oInputMarginLeft=new k({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginLeft")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_WIDTH_ERROR"),max:{parts:[{path:"setting>/paperWidth"},{path:"setting>/unit"}],formatter:i.bind(this)},description:"{setting>/unit}"})]}),new F({direction:c.Column,layoutData:new d({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new L({text:this._oRb.getText("GNT_PRNTG_MARGIN_BOTTOM")}),this._oInputMarginBottom=new k({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginBottom")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_HEIGHT_ERROR"),max:{parts:[{path:"setting>/paperHeight"},{path:"setting>/unit"}],formatter:i.bind(this)},description:"{setting>/unit}"}).addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_MARGIN_RIGHT")}),this._oInputMarginRight=new k({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginRight")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_WIDTH_ERROR"),max:{parts:[{path:"setting>/paperWidth"},{path:"setting>/unit"}],formatter:i.bind(this)},description:"{setting>/unit}"})]}).addStyleClass("sapGanttPrintingLeftMargin"),new B({icon:{path:"setting>/marginLocked",formatter:function(_){if(_){return"sap-icon://chain-link";}return"sap-icon://broken-link";}},press:function(){var _=this._oModel.getProperty("/marginLocked");this._oModel.setProperty("/marginLocked",!_);}.bind(this),type:"Transparent"}).addStyleClass("sapGanttPrintingLockButton sapGanttPrintingLeftMargin")]}).addStyleClass("sapGanttPrintingTopMargin sapGanttPrintingTopMargin")];};A.prototype._createCropMarks=function(){return[new n({state:"{setting>/cropMarks}"}),new F({renderType:"Bare",visible:"{setting>/cropMarks}",items:[new F({direction:c.Column,layoutData:new d({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new L({text:"Weight:"}),new k({min:0,step:0.05,displayValuePrecision:2,value:"{setting>/cropMarksWeight}",fieldWidth:"7rem",description:"pt"})]}),new F({direction:c.Column,layoutData:new d({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new L({text:"Offset:"}),this._oInputCropMarksOffset=new k({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeCropMarksInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/cropMarksOffset")),fieldWidth:"7rem",description:"{setting>/unit}"})]}).addStyleClass("sapGanttPrintingLeftMargin")]}).addStyleClass("sapGanttPrintingTopMargin")];};A.prototype._createCompression=function(){var i=this._oModel.getProperty("/exportAsJPEG");return[new L({text:this._oRb.getText("GNT_PRNTG_EXPORT_TYPES")}),new f({columns:2,selectedIndex:i?0:1,buttons:[new R({id:"jpeg",text:"JPEG",selected:"{setting>/exportAsJPEG}"}),new R({id:"png",text:"PNG"})]}).addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_COMPRESSION_QUALITY"),visible:"{setting>/exportAsJPEG}"}),this._createCompressionComboBox(),this._createCompressionSlider().addStyleClass("sapGanttPrintingTopMargin sapGanttPrintingBottomMargin"),new M({text:this._oRb.getText("GNT_PRNTG_COMPRESSION_PNG_WARNING"),showIcon:true,type:"Warning",visible:{path:"setting>/exportAsJPEG",type:"sap.ui.model.type.Boolean",formatter:function(i){return!i;}}}).addStyleClass("sapGanttPrintingBottomMargin")];};A.prototype._createOptionsForm=function(){return new F({renderType:"Bare",direction:c.Column,items:[new L({text:this._oRb.getText("GNT_PRNTG_EXPORT_TYPES")}),new f({columns:2,selectedIndex:this._oModel.getProperty("/multiplePage")?0:1,select:this._onChangeExportTypes.bind(this),buttons:[new R({id:"Multiple",text:this._oRb.getText("GNT_PRNTG_MULTIPLE_PAGE"),selected:"{setting>/multiplePage}"}),new R({id:"Single",text:this._oRb.getText("GNT_PRNTG_SINGLE_PAGE")})]}).addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_ORIENTATION")}),this._radioGroupOrientation=new f({columns:2,selectedIndex:this._oModel.getProperty("/portrait")?0:1,select:this._onChangeOrientation.bind(this),buttons:[new R({id:"Portrait",text:this._oRb.getText("GNT_PRNTG_PORTRAIT"),selected:"{setting>/portrait}"}),new R({id:"Landscape",text:this._oRb.getText("GNT_PRNTG_LANDSCAPE")})]}).addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_PAPER_SIZE")}),this._createPaperComboBox(),this._createPaperSizeFields().addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_DURATION")}),this._createDurationComboBox(),this._createDatePicker().addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_SCALE"),visible:"{setting>/multiplePage}"}),this._createScale().addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_PAGE_RANGE"),visible:"{setting>/multiplePage}"}),this._createPageRange().addStyleClass("sapGanttPrintingBottomMargin"),new L({text:this._oRb.getText("GNT_PRNTG_HEADER_AND_FOOTER")}),this._createCheckBoxWithInput(this._oRb.getText("GNT_PRNTG_HEADER"),"{setting>/showHeaderText}","{setting>/headerText}"),this._createCheckBoxWithInput(this._oRb.getText("GNT_PRNTG_FOOTER"),"{setting>/showFooterText}","{setting>/footerText}").addStyleClass("sapGanttPrintingBottomMargin"),this._createLabelWithSwitch(this._oRb.getText("GNT_PRNTG_SHOW_PAGE_NUMBER"),"{setting>/showPageNumber}").addStyleClass("sapGanttPrintingBottomMargin"),this._createPanel(this._oRb.getText("GNT_PRNTG_MARGIN"),this._createMargin()),this._createPanel(this._oRb.getText("GNT_PRNTG_COMPRESSION"),this._createCompression())]});};A.prototype._createDialogContent=function(){var i=new F({renderType:"Bare",fitContainer:true,items:[this._oFlexBoxPreview=new F({renderType:"Bare",layoutData:new d({shrinkFactor:1,growFactor:1,baseSize:"auto"}),direction:c.Column,items:[new F({renderType:"Bare",layoutData:new d({shrinkFactor:0,growFactor:0,baseSize:"3.5rem"})}),this._oHTMLDialogPreview=new H({content:"<div class=\"sapGanttPrintingPreviewContentDiv\"><div class=\"sapGanttPrintingPreviewPageDiv\"></div></div>"}),new F({renderType:"Bare",justifyContent:"Center",alignItems:"Center",layoutData:new d({shrinkFactor:0,growFactor:0,baseSize:"6rem"}),items:[this._oButtonFirst=new B({icon:"sap-icon://close-command-field",visible:"{setting>/multiplePage}",press:this._onPressButtonFirst.bind(this),type:"Transparent"}).addStyleClass("sapGanttPrintingPreviewIconMarginRight"),this._oButtonPrevious=new B({icon:"sap-icon://navigation-left-arrow",visible:"{setting>/multiplePage}",press:this._onPressButtonPrevious.bind(this),type:"Transparent"}),new T({textAlign:"Center",visible:"{setting>/multiplePage}",width:"7.25rem",text:{parts:[{path:"setting>/previewPageNumber"},{path:"setting>/lastPageNumber"}],formatter:function(_,a1){return a1?this._oRb.getText("GNT_PRNTG_OF",[_,a1]):_.toString();}.bind(this)}}).addStyleClass("sapGanttPrintingPreviewText"),this._oButtonNext=new B({icon:"sap-icon://navigation-right-arrow",visible:"{setting>/multiplePage}",press:this._onPressButtonNext.bind(this),type:"Transparent"}).addStyleClass("sapGanttPrintingPreviewIconMarginRight"),this._oButtonLast=new B({icon:"sap-icon://open-command-field",visible:"{setting>/multiplePage}",press:this._onPressButtonLast.bind(this),type:"Transparent"})]}).addStyleClass("sapGanttPrintingPreviewFooter")]}).addStyleClass("sapGanttPrintingPreviewContent"),new S({horizontal:false,vertical:true,layoutData:new d({shrinkFactor:0,growFactor:0,baseSize:"27rem"}),content:[this._createOptionsForm().addStyleClass("sapGanttPrintingDialogSettings")]})]});this._updatePageNumberButtons();return i;};A.prototype._createAndOpenDialog=function(){this._oDialog=new D({title:this._oRb.getText("GNT_PRNTG_PDF_EXPORT_TITLE"),contentWidth:"100%",contentHeight:"100%",horizontalScrolling:false,verticalScrolling:false,content:[this._createDialogContent()],buttons:[this._oButtonExport=new B({text:this._oRb.getText("GNT_PRNTG_EXPORT"),press:function(){this.export();}.bind(this)}),new B({text:this._oRb.getText("GNT_PRNTG_CANCEL"),press:function(){this.close();}.bind(this)})]}).addStyleClass("sapGanttPrintingDialog");this._oDialog.onsapescape=function(i){this.close();i.preventDefault();i.stopPropagation();}.bind(this);this._oDialog.setModel(this._oModel,"setting");this._oDialog.open();this._sResizeHandlerId=x.register(this._oDialog,this._onResize.bind(this));};return A;});
