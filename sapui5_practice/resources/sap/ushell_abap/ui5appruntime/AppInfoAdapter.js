/*!
 * Copyright (c) 2009-2017 SAP SE, All Rights Reserved
 */
sap.ui.define(["sap/base/Log",'sap/ui/thirdparty/URI',"sap/ui/thirdparty/jquery"],function(L,U,q){"use strict";var l=L.getLogger("sap/ushell_abap/ui5appruntime/AppInfoAdapter",L.Level.INFO);function A(){}A.prototype.getAppInfo=function(a){var u=q.sap.getUriParameters();if(a===undefined){a=u.get("sap-ui-app-id");}if(a){return this._loadAppIndexData("/sap/bc/ui2/app_index/ui5_app_info_json",a);}else{return Promise.reject(new Error("Cannot load app info - no app-id provided and URL parameter 'sap-ui-app-id' not set"));}};A.prototype._loadAppIndexData=function(s,a){var u=new U(s).query({"id":a}).toString();return new Promise(function(r,b){q.ajax({type:"GET",dataType:"json",url:u}).done(function(R){var o=R[a];if(o){r(R[a]);}else{b(new Error("UI5 app index data loaded from "+u+" does not contain app "+a));}}).fail(function(e){l.error(e.responseText);b(new Error("Failed to load UI5 app index data loaded from "+u+": "+e.responseText));});});};return new A();},false);
