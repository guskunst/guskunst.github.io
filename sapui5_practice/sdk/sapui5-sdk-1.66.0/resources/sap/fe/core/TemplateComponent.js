/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(['sap/base/util/merge','sap/ui/core/UIComponent','sap/ui/core/ComponentContainer',"sap/fe/viewFactory","sap/ui/core/routing/HashChanger"],function(m,U,C,V,H){"use strict";function g(o){return o.getParent().getParent();}function c(p,M){var l=[],L="";if(M&&p){var a=p.split("/");a.pop();for(var i=0;i<a.length;i++){L=L+"/"+a[i];l.push({'context':M.getMetaModel().getMetaContext(L.replace(/ *\([^)]*\) */g,"")+"/$Type")});}}return l;}var T=U.extend("sap.fe.core.TemplateComponent",{metadata:{properties:{entitySet:{type:"string",defaultValue:null},navigation:{type:"object"}},library:"sap.fe"},getComponentContainer:function(){return this.oContainer;},onBeforeBinding:function(o,p){return this.oViewPromise;},onAfterBinding:function(o){return true;},onBeforeRendering:function(){if(!this.getRootControl()){var t=this,v={},o=t.getComponentContainer(),M=o.getModel(),a=g(o),A=a.getMetadata().getComponentName(),l=a.getLocalId(this.getId()),e=t.getEntitySet(),s=t.get_templateName();if(M){v.navigation=t.getNavigation();v.links=c(H.getInstance().getHash(),M);if(t.getViewData){m(v,t.getViewData());}this.oViewPromise=V.create({viewId:A+"::"+l,viewName:s,appComponent:a,entitySet:e,viewData:v,model:a.getModel()});this.oViewPromise.then(function(b){t.setAggregation("rootControl",b);o.invalidate();});}}}});return T;},true);
