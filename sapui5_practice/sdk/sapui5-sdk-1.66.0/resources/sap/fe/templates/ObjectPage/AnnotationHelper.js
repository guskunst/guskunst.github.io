/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/base/Log","sap/ui/model/odata/v4/AnnotationHelper","sap/ui/base/ManagedObject"],function(L,O,M){"use strict";var A={buildExpressionForProgressIndicatorPercentValue:function(i,d,u){var p="0";var e;var m=i.getModel(1);var P=i.getPath(1);var b=m.createBindingContext(P);if(d.Value&&d.Value.$Path){var v="${"+d.Value.$Path+"}";var t;if(d.TargetValue){t=sap.ui.model.odata.v4.AnnotationHelper.value(d.TargetValue,{context:b});if(d.TargetValue.$Path){t="$"+t;}}var E="(({0} > 100) ? 100 : (({0} < 0) ? 0 : ({0} * 1)))";var s="(({1} > 0) ? (({0} > {1}) ? 100 : (({0} < 0) ? 0 : ({0} / {1} * 100))) : 0)";if(u){u="'"+u+"'";e="'{'= ({2} === ''%'') ? "+E+" : "+s+" '}'";p=jQuery.sap.formatMessage(e,[v,t,u]);}else{e="'{'= "+s+" '}'";p=jQuery.sap.formatMessage(e,[v,t]);}}return p;},buildExpressionForProgressIndicatorDisplayValue:function(i,d,u){var m=i.getModel(1);var p=i.getPath(1);var b=m.createBindingContext(p);var P=[];P.push(sap.ui.model.odata.v4.AnnotationHelper.value(d.Value,{context:b}));P.push(sap.ui.model.odata.v4.AnnotationHelper.value(d.TargetValue,{context:b}));P.push(u);var D=sap.fe.templates.ObjectPage.AnnotationHelper.formatDisplayValue(P);return D;},formatDisplayValue:function(p){var d="",v=p[0],t=p[1],u=p[2];if(v){return sap.ui.getCore().getLibraryResourceBundle("sap.fe",true).then(function(r){if(u){if(u==='%'){d=r.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_UOM_IS_PERCENT",[v]);}else{if(t){d=r.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_UOM_IS_NOT_PERCENT",[v,t,u]);}else{d=r.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_UOM_IS_NOT_PERCENT_NO_TARGET_VALUE",[v,u]);}}}else{if(t){d=r.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_NO_UOM",[v,t]);}else{d=v;}}return d;});}else{L.warning("Value property is mandatory, the default (empty string) will be returned");}},buildExpressionForCriticality:function(d){var f=sap.ui.core.ValueState.None;var e;var c=d.Criticality;if(c){e="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+sap.ui.core.ValueState.Error+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Critical'') || ({0} === ''2'') || ({0} === 2) ? ''"+sap.ui.core.ValueState.Warning+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+sap.ui.core.ValueState.Success+"'' : "+"''"+sap.ui.core.ValueState.None+"'' '}'";if(c.$Path){var C='${'+c.$Path+"}";f=jQuery.sap.formatMessage(e,C);}else if(c.$EnumMember){var s="'"+c.$EnumMember+"'";f=jQuery.sap.formatMessage(e,s);}else{L.warning("Case not supported, returning the default sap.ui.core.ValueState.None");}}else{L.warning("Case not supported, returning the default sap.ui.core.ValueState.None");}return f;},buildRatingIndicatorSubtitleExpression:function(s){if(s){return"{parts: [{path: '"+s.$Path+"'}], formatter: 'sap.fe.templates.ObjectPage.AnnotationHelper.formatRatingIndicatorSubTitle'}";}},formatRatingIndicatorSubTitle:function(s){if(s){var t=this;return sap.ui.getCore().getLibraryResourceBundle("sap.fe",true).then(function(r){if(t.getCustomData&&t.getCustomData().length>0){return r.getText("RATING_INDICATOR_SUBTITLE",[s,t.data("Subtitle")]);}else{var S=s>1?r.getText("RATING_INDICATOR_SUBTITLE_LABEL_PLURAL"):r.getText("RATING_INDICATOR_SUBTITLE_LABEL");return r.getText("RATING_INDICATOR_SUBTITLE",[s,S]);}});}},getBindingPathForForm:function(p){var n=sap.ui.model.odata.v4.AnnotationHelper.getNavigationPath(p);return"\{path:'"+n+"'\}";},getElementBinding:function(p){var n=sap.ui.model.odata.v4.AnnotationHelper.getNavigationPath(p);if(n){return"\{path:'"+n+"'\}";}else{return"{path: ''}";}},getEditDeleteButtonVisibility:function(r,d){if(d){if(typeof r==='object'&&r.$Path){return"{= ${"+r.$Path+"} && (${ui>/editable} === 'Editable')}";}else{return"{= (${ui>/editable} === 'Editable')}";}}else if(typeof r==='object'&&r.$Path){return"{= ${"+r.$Path+"} && !(${ui>/editable} === 'Editable')}";}else{return"{= !(${ui>/editable} === 'Editable')}";}},getLinkEntityType:function(c){return c.getObject();},formatTextForBreadcrumbs:function(i,t,T){var m=i.getInterface(1).getModel();var p=i.getInterface(1).getPath();var b=m.createBindingContext(p);var B=sap.ui.model.odata.v4.AnnotationHelper.value(t,{context:b});if(t&&t.$Path&&T){var s,a=T.replace(/'/g,"\\'");s="{= $"+B+" ? $"+B+" : '"+a+"' }";return s;}else{if(!B){return T||"[[no title]]";}return B;}},isDeepFacetHierarchy:function(f){if(f.Facets){for(var i=0;i<f.Facets.length;i++){if(f.Facets[i].$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"){return true;}}}return false;},getDataFieldCollection:function(t){var p=t.getPath();var T=t.getObject(p),n=O.getNavigationPath(p);return n+"/"+T+(T.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>-1?"/Data":"");},isReadOnlyFromStaticAnnotations:function(a,f){var c,i,r;if(a["@Org.OData.Core.V1.Computed"]){c=a["@Org.OData.Core.V1.Computed"].Bool?a["@Org.OData.Core.V1.Computed"].Bool=="true":true;}if(a["@Org.OData.Core.V1.Immutable"]){i=a["@Org.OData.Core.V1.Immutable"].Bool?a["@Org.OData.Core.V1.Immutable"].Bool=="true":true;}r=c||i;if(f){r=(r||f=="com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly");}if(r){return false;}else{return true;}},isReadOnlyFromDynamicAnnotations:function(f){var i;if(f){if(M.bindingParser(f)){i="$"+f+" === '1'";}}if(i){return"{= "+i+"? false : true }";}else{return true;}},hasDeterminingActions:function(e){var I=e['@com.sap.vocabularies.UI.v1.Identification'];for(var i in I){if(I[i].$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&I[i].Determining===true){return true;}}return false;},doesFacetOnlyContainForms:function(f){if(f){var c=function(F){return F.Target&&F.Target.$AnnotationPath&&(F.Target.$AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")<0)&&(F.Target.$AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.Identification")<0)&&(F.Target.$AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.DataPoint")<0)&&(F.Target.$AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.StatusInfo")<0);};return!(f.some(c));}return false;}};A.buildExpressionForProgressIndicatorPercentValue.requiresIContext=true;A.formatTextForBreadcrumbs.requiresIContext=true;A.buildExpressionForProgressIndicatorDisplayValue.requiresIContext=true;return A;},true);
