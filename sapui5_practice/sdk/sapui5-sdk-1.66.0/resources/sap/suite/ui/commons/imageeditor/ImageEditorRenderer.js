sap.ui.define(["sap/ui/Device"],function(D){"use strict";var I={};var H={nw:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Horizontal","Vertical"],types:["Rectangle","Custom"]},ne:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Horizontal","Vertical"],types:["Rectangle","Custom"]},sw:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Horizontal","Vertical"],types:["Rectangle","Custom"]},se:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Horizontal","Vertical"],types:["Rectangle","Custom"]},n:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorCenter",handlers:["Horizontal"],types:["Rectangle","Custom","Ellipse"]},s:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorCenter",handlers:["Horizontal"],types:["Rectangle","Custom","Ellipse"]},w:{vertical:"sapSuiteUiCommonsImageEditorMiddle",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Vertical"],types:["Rectangle","Custom","Ellipse"]},e:{vertical:"sapSuiteUiCommonsImageEditorMiddle",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Vertical"],types:["Rectangle","Custom","Ellipse"]}};I.render=function(r,c){r.write("<div");r.addClass("sapSuiteUiCommonsImageEditor");r.addClass("sapSuiteUiCommonsImageEditorEmpty");r.addClass("sapSuiteUiCommonsImageEditorMode"+c.getMode());r.writeClasses();r.writeControlData(c);r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-canvasInnerContainer");r.writeAttribute("tabindex","0");r.writeAttribute("role","img");r.addClass("sapSuiteUiCommonsImageEditorCanvasInnerContainer");r.writeClasses();r.write(">");this.renderTransformHandlers(r);this.renderSvgOverlay(r,c);this.renderCropArea(r,c);r.write("</div>");r.write("</div>");};I.renderSvgOverlay=function(r,c){r.write("<svg class='sapSuiteUiCommonsImageEditorCropOverlayContainer'>");r.write("<defs>");r.write("<rect id='"+c.getId()+"-overlayMaskRect'/>");r.write("<ellipse id='"+c.getId()+"-overlayMaskEllipse'/>");r.write("<mask");r.writeAttribute("id",c.getId()+"-darkOverlayMask");r.write(">");r.write("<rect");r.writeAttribute("fill","white");r.writeAttribute("x","0");r.writeAttribute("y","0");r.writeAttribute("width","100%");r.writeAttribute("height","100%");r.write("/>");r.write("<use fill='black' href='#"+c.getId()+"-overlayMaskRect"+"' class='sapSuiteUiCommonsImageEditorCropItemRectangle'/>");r.write("<use fill='black' href='#"+c.getId()+"-overlayMaskEllipse"+"' class='sapSuiteUiCommonsImageEditorCropItemEllipse'/>");r.write("<use href='#"+c.getId()+"-overlayMaskCustomBlack"+"' class='sapSuiteUiCommonsImageEditorCropItemCustom'/>");r.write("</mask>");r.write("<mask");r.writeAttribute("id",c.getId()+"-lightOverlayClip");r.write(">");r.write("<use fill='white' href='#"+c.getId()+"-overlayMaskRect"+"' class='sapSuiteUiCommonsImageEditorCropItemRectangle'/>");r.write("<use fill='white' href='#"+c.getId()+"-overlayMaskEllipse"+"' class='sapSuiteUiCommonsImageEditorCropItemEllipse'/>");r.write("<use href='#"+c.getId()+"-overlayMaskCustomWhite"+"' class='sapSuiteUiCommonsImageEditorCropItemCustom'/>");r.write("</mask>");r.write("</defs>");r.write("<rect");r.writeAttribute("mask","url(#"+c.getId()+"-darkOverlayMask)");r.writeAttribute("x","0");r.writeAttribute("y","0");r.writeAttribute("width","100%");r.writeAttribute("height","100%");r.addClass("sapSuiteUiCommonsImageEditorCropOverlayBlack");r.writeClasses();r.write("/>");r.write("<rect");r.writeAttribute("mask","url(#"+c.getId()+"-lightOverlayClip)");r.writeAttribute("fill","white");r.writeAttribute("x","0");r.writeAttribute("y","0");r.writeAttribute("width","100%");r.writeAttribute("height","100%");r.addClass("sapSuiteUiCommonsImageEditorCropOverlayWhite");r.writeClasses();r.write("/>");r.write("</svg>");};I.renderCropArea=function(r,c){r.write("<div class='sapSuiteUiCommonsImageEditorCropInnerRectangle'>");this.renderCropAreaDragHandler(r,c);this.renderCropAreaResizeHandlers(r);r.write("<svg>");r.write("<defs>");r.write("<mask id='"+c.getId()+"-thirdsMask"+"' maskContentUnits='objectBoundingBox'>");r.write("<rect class='sapSuiteUiCommonsImageEditorCropItemRectangle' fill='white' width='1' height='1' />");r.write("<ellipse class='sapSuiteUiCommonsImageEditorCropItemEllipse' fill='white' cx='0.5' cy='0.5' rx='0.5' ry='0.5' />");r.write("</mask>");this.renderShadowFilter(r,c.getId()+"-bottomShadow",0,2);this.renderShadowFilter(r,c.getId()+"-topShadow",0,-2);this.renderShadowFilter(r,c.getId()+"-rightShadow",2,0);this.renderShadowFilter(r,c.getId()+"-leftShadow",-2,0);r.write("</defs>");r.write("<ellipse class='sapSuiteUiCommonsImageEditorCropItemEllipse' fill='transparent' stroke-width='1' stroke='white' cx='50%' cy='50%' rx='50%' ry='50%' />");this.renderRectBorders(r,c);this.renderThirdLines(r,c);r.write("</svg>");r.write("</div>");};I.renderZones=function(r,c){r.write("<div class='sapSuiteUiCommonsImageEditorZones'>");c.getZones().forEach(function(z){this.renderZone(r,c,z);},this);r.write("</div>");};I.renderZone=function(r,c,z){r.write("<div");r.writeElementData(z);r.addClass("sapSuiteUiCommonsImageEditorZone");if(z.getEditable()){r.addClass("sapSuiteUiCommonsImageEditorZoneEditable");}if(z.getHighlighted()){r.addClass("sapSuiteUiCommonsImageEditorZoneHighlighted");}r.writeStyles();r.writeClasses();r.write(">");r.write("<div class='sapSuiteUiCommonsImageEditorZoneInner'>");if(!z.getEditable()&&!z.getHighlighted()){r.write("<div class='sapSuiteUiCommonsImageEditorZoneInnerColoring'></div>");}if(z.getHighlighted()){r.write("<div class='sapSuiteUiCommonsImageEditorZoneLabel'>");r.write("<span>");r.writeEscaped(z.getLabel());r.write("</span>");r.write("</div>");}if(z.getEditable()){this.renderBWBorder(r);}r.write("</div>");if(z.getEditable()){this.renderZoneResizeHandlers(r);}r.write("</div>");};I.renderBWBorder=function(r){r.write("<svg class='sapSuiteUiCommonsImageEditorZoneEditBorder' x='0' y='0' width='100%' height='100%'>");this.renderStrokeRect(r,"black",5,5,5,0.5);this.renderStrokeRect(r,"white",5,5,0,0.5);r.write("</svg>");};I.renderStrokeRect=function(r,c,d,i,o,f){r.write("<rect x='0' y='0' width='100%' height='100%' fill='none'");r.writeAttribute("stroke",c);r.writeAttribute("stroke-dasharray",d+","+i);r.write(">");r.write("<animate attributeName='stroke-dashoffset' repeatCount='indefinite'");r.writeAttribute("from",o);r.writeAttribute("to",o+d+i);r.writeAttribute("dur",f);r.write("></animate>");r.write("</rect>");};I.renderShadowFilter=function(r,i,d,a){r.write("<filter");r.writeAttribute("id",i);r.writeAttribute("x","0");r.writeAttribute("y","0");r.writeAttribute("width","100%");r.writeAttribute("height","100%");r.writeAttribute("filterUnits","userSpaceOnUse");r.write(">");r.write("<feGaussianBlur");r.writeAttribute("in","SourceAlpha");r.writeAttribute("stdDeviation","2");r.writeAttribute("result","blur");r.write("/>");r.write("<feOffset");r.writeAttribute("in","blur");r.writeAttribute("result","offOut");r.writeAttribute("x",d);r.writeAttribute("y",a);r.write("/>");r.write("<feBlend");r.writeAttribute("in","SourceGraphic");r.writeAttribute("in2","offOut");r.writeAttribute("mode","normal");r.write("/>");r.write("</filter>");};I.renderRectBorders=function(r,c){r.write("<g class='sapSuiteUiCommonsImageEditorCropItemRectangle sapSuiteUiCommonsImageEditorCropItemCustom'>");this.renderCropLine(r,c,"bottomShadow",0,0,100,0);this.renderCropLine(r,c,"leftShadow",100,0,100,100);this.renderCropLine(r,c,"topShadow",100,100,0,100);this.renderCropLine(r,c,"rightShadow",0,100,0,0);r.write("</g>");};I.renderThirdLines=function(r,c){r.write("<g mask='url(#"+c.getId()+"-thirdsMask)'>");this.renderCropLine(r,c,"rightShadow",100/3,0,100/3,100);this.renderCropLine(r,c,"rightShadow",100*2/3,0,100*2/3,100);this.renderCropLine(r,c,"bottomShadow",0,100/3,100,100/3);this.renderCropLine(r,c,"bottomShadow",0,100*2/3,100,100*2/3);r.write("</g>");};I.renderCropLine=function(r,c,f,x,y,X,Y){r.write("<line class='sapSuiteUiCommonsImageEditorCropLine'");if(!D.browser.msie&&!D.browser.edge){r.writeAttribute("filter","url(#"+c.getId()+"-"+f+")");}r.writeAttribute("x1",x+"%");r.writeAttribute("y1",y+"%");r.writeAttribute("x2",X+"%");r.writeAttribute("y2",Y+"%");r.write("/>");};I.renderTransformHandlers=function(r){r.write("<div class='sapSuiteUiCommonsImageEditorTransformHandlers'>");Object.keys(H).forEach(function(k){this.renderTransformHandler(r,k);},this);r.write("</div>");};I.renderTransformHandler=function(r,d){var h=H[d],c;r.write("<div");c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorHandlerContainer");c.forEach(function(C){r.addClass(C);});r.writeClasses();r.write(">");h.handlers.forEach(function(s){this.renderDiv(r,["sapSuiteUiCommonsImageEditorHandler","sapSuiteUiCommonsImageEditorHandler"+s]);},this);r.write("</div>");};I.renderCropAreaDragHandler=function(r,c){var i=c._getCropAreaDragIcon();r.write("<div");r.addClass("sapSuiteUiCommonsImageEditorDragHandlerContainer");r.writeClasses();r.write(">");r.renderControl(i);r.write("</div>");};I.renderCropAreaResizeHandlers=function(r){Object.keys(H).forEach(function(k){this.renderCropAreaResizeHandler(r,k);},this);};I.renderCropAreaResizeHandler=function(r,d){var h=H[d],c;r.write("<div");c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorHandlerContainer");h.types.forEach(function(t){c.push("sapSuiteUiCommonsImageEditorCropItem"+t);});c.forEach(function(C){r.addClass(C);});r.writeClasses();r.write(">");h.handlers.forEach(function(s){this.renderDiv(r,["sapSuiteUiCommonsImageEditorHandler","sapSuiteUiCommonsImageEditorHandler"+s]);},this);r.write("</div>");};I.renderDiv=function(r,c){r.write("<div");c.forEach(function(C){r.addClass(C);});r.writeClasses();r.write(">");r.write("</div>");};I.renderZoneResizeHandlers=function(r){Object.keys(H).forEach(function(k){this.renderZoneResizeHandler(r,k);},this);};I.renderZoneResizeHandler=function(r,d){var c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorZoneResizeHandler");this.renderDiv(r,c);};I.getCommonHandlerClasses=function(d){var h=H[d];return["ui-resizable-handle","ui-resizable-"+d,h.vertical,h.horizontal];};return I;},true);
