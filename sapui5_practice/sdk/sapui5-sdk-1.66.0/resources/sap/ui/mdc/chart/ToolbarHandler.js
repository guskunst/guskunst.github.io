/*
 * ! SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/ui/mdc/library','../ActionToolbar','sap/m/Title','sap/m/OverflowToolbarButton','sap/m/OverflowToolbarToggleButton',"sap/ui/mdc/chart/ChartTypeButton",'sap/ui/mdc/chart/ChartSettings'],function(M,A,T,O,a,C,b){"use strict";var c=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var d={createToolbar:function(o,u){if(!o.getAggregation("_toolbar")){var t=new A(o.getId()+"--toolbar",{design:"Transparent",begin:[new T(o.getId()+"-title",{text:o.getHeader()})],actions:u});o.setAggregation("_toolbar",t);this.updateToolbar(o);}},updateToolbar:function(o){var t=o.getAggregation("_toolbar");if(!t){return;}t.destroyEnd();if(!o.getIgnoreToolbarActions().length||o.getIgnoreToolbarActions().indexOf(M.ChartToolbarActionType.ZoomInOut)<0){t.addEnd(new O({tooltip:c.getText("chart.TOOLBAR_ZOOM_IN"),icon:"sap-icon://zoom-in",enabled:"{= ${$mdcChart>/_chart/getZoomInfo/enabled} && ${$mdcChart>/_chart/getZoomInfo/currentZoomLevel} < 1}",press:[function(){var o=o.getAggregation("_chart");o.zoom({direction:"in"});o._oManagedObjectModel.checkUpdate();},o]}));t.addEnd(new O({tooltip:c.getText("chart.TOOLBAR_ZOOM_OUT"),icon:"sap-icon://zoom-out",enabled:"{= ${$mdcChart>/_chart/getZoomInfo/enabled} && ${$mdcChart>/_chart/getZoomInfo/currentZoomLevel} > 0}",press:[function(){var o=o.getAggregation("_chart");o.zoom({direction:"out"});o._oManagedObjectModel.checkUpdate();},o]}));}if(!o.getIgnoreToolbarActions().length||o.getIgnoreToolbarActions().indexOf(M.ChartToolbarActionType.DrillDownUp)<0){o._oDrillDownBtn=new O(o.getId()+"-drillDown",{icon:"sap-icon://drill-down",text:"View By",tooltip:"View By",press:[o._showDrillDown,o]});t.addEnd(o._oDrillDownBtn);}if(!o.getIgnoreToolbarActions().length||o.getIgnoreToolbarActions().indexOf(M.ChartToolbarActionType.Legend)<0){t.addEnd(new a({type:"Transparent",text:c.getText("chart.LEGENDBTN_TEXT"),tooltip:c.getText("chart.LEGENDBTN_TOOLTIP"),icon:"sap-icon://legend",pressed:"{$mdcChart>/legendVisible}"}));}if(!o.getIgnoreToolbarActions().length||o.getIgnoreToolbarActions().indexOf(M.ChartToolbarActionType.P13nOfVisibility)<0){t.addEnd(new O(o.getId()+"-chart_settings",{icon:"sap-icon://action-settings",tooltip:c.getText('chart.PERSONALIZATION_DIALOG_TITLE'),press:function(e){var s=e.getSource();o._getPropertyData().then(function(p){b.showPanel(o,"Chart",s,p);});}}));}if(!o.getIgnoreToolbarActions().length||o.getIgnoreToolbarActions().indexOf(M.ChartToolbarActionType.P13nOfSort)<0){t.addEnd(new O(o.getId()+"-sort_settings",{icon:"sap-icon://sort",tooltip:c.getText('sort.PERSONALIZATION_DIALOG_TITLE'),press:function(e){var s=e.getSource();o._getPropertyData().then(function(p){b.showPanel(o,"Sort",s,p);});}}));}if(!o.getIgnoreToolbarActions().length||o.getIgnoreToolbarActions().indexOf(M.ChartToolbarActionType.P13nOfFilter)<0){t.addEnd(new O(o.getId()+"-filter_settings",{icon:"sap-icon://filter",tooltip:c.getText('filter.PERSONALIZATION_DIALOG_TITLE'),press:function(e){var s=e.getSource();sap.ui.require(["sap/ui/mdc/base/personalization/Controller","sap/ui/mdc/flexibility/Chart.flexibility"],function(f,g){o._getP13nStateOfFilter().then(function(p){f.showFilterDialog(s,p.initialData,p.runtimeData,p.runtimeData.modelName,p.runtimeData.model,o,function(h){h.forEach(function(i){f.addChange(g,i.changeType,i,false);});});});});}}));}if(!o.getIgnoreToolbarActions().length||o.getIgnoreToolbarActions().indexOf(M.ChartToolbarActionType.P13nOfChartType)<0){t.addEnd(new C(o));}if(!o.getIgnoreToolbarActions().length||o.getIgnoreToolbarActions().indexOf(M.ChartToolbarActionType.FullScreen)<0){t.addEnd(new O({icon:"{= ${$mdcChart>/fullScreen} ? 'sap-icon://exit-full-screen' : 'sap-icon://full-screen'}",press:[function(){o.setFullScreen(!o.getFullScreen());o._oManagedObjectModel.checkUpdate(true);},o]}));}}};return d;});
