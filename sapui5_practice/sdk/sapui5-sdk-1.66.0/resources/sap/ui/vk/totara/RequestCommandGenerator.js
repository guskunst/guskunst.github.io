sap.ui.define(["./Generator","./Coder","./Commands"],function(G,C,c){"use strict";var R=function(){var m=128;var d=128;var e=128;var s=128;var t=128;var g=32;var f;var h;var i;var j;var k;var l;var n;var o;var v;var p;var q;var r;this.init=function(){f=new Set();h=new Set();i=new Set();k=new Map();j=[];l=[];n=new Set();o=new Set();v=new Set();p=null;q=null;r=new Set();};this.init();this.setSceneIdAndContext=function(a,b){p=a;q=b;};this.pushMeshIds=function(a){u(f,a);};this.pushMaterialIds=function(a){u(h,a);};this.pushImageIds=function(a){u(i,a);};this.pushHighlightStyleIds=function(a){u(r,a);};this.pushGeometryIds=function(x){x.forEach(function(a,b){k.set(b,a);j.push(b);});j.sort(function(a,b){return k.get(a)-k.get(b);});};this.pushAnnotationIds=function(a){l=l.concat(a);};this.pushTrackIds=function(a){u(n,a);};this.pushSequenceIds=function(a,p){u(o,a);};this.pushViewIds=function(a,p){u(v,a);};this.canGenerateCommand=function(){return f.size>0||h.size>0||i.size>0||j.length>0||n.size>0||o.size>0||v.size>0;};this.clearContent=function(){f.clear();h.clear();i.clear();j=[];n.clear();o.clear();v.clear();r.clear();};this.generateRequestCommand=function(a,b){var x;var y,z;if(f.size>0){x=w(f,m);y=G.createGetContentCommand(c.getMesh,x,b);}else if(l.length>0){x=l.splice(0,d);y=G.createGetContentCommand(c.getAnnotation,x,b,p);}else if(h.size>0){x=w(h,e);y=G.createGetContentCommand(c.getMaterial,x,b);}else if(j.length>0){x=j.splice(j.length-g);y=G.createGetContentCommand(c.getGeometry,x,b);y.resources=x;x.forEach(function(D){k.delete(D);});}else if(i.size>0){x=w(i,1);y=G.createGetContentCommand(c.getImage,x,b);y.resources=x;}else if(r.size>0){x=w(r,1);var A={id:x[0]};if(b){A.token=b;}z=G.createGetHighlightStyleCommand(A);y={command:z,method:c.getHighlightStyle};}else if(o.size>0){x=w(o,s);y=G.createRequestContentCommandWtihScenId(c.getSequence,x,p,b);}else if(n.size>0){x=w(n,t);y=G.createGetContentCommand(c.getTrack,x,b);}else if(v.size>0){var B=v.values(),D=B.next().value;if(D!=undefined){var E=q.includeHidden!==undefined?q.includeHidden:false;var F=q.includeAnimation!==undefined?q.includeAnimation:true;var H={sceneId:p,id:D,token:b,includeHidden:E,includeAnimation:F,groupId:q.currentViewGroupId};z=G.createGetViewCommand(H);y={command:z,method:c.getView};v.delete(D);}}if(y){if(!a){y.command=C.encode(y.command);}return y;}return null;};function u(a,b){b.forEach(function(x){a.add(x);});}function w(a,b){var x=[];for(var y=a.values(),z=y.next().value;z!=undefined&&x.length<b;z=y.next().value){x.push(z);a.delete(z);}return x;}};return R;});
