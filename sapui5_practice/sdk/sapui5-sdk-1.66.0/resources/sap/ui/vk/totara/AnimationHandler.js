sap.ui.define(["jquery.sap.global","./TotaraUtils"],function(q,T){"use strict";var A=function(){};A.setPlayback=function(s,c){if(T.checkError(c)){return c;}var r={};var a=s.viewIdSceneIdMap.get(c.viewId);if(!a){c.error="Try to extract play backs for unmatching scene";return c;}var b=new Set();for(var d=0;d<c.playbacks.length;d++){var p=c.playbacks[d];if(p.id==null){p.id=c.viewId+"-playback";p.sequence.id=c.viewId+"-cont";p.sequenceId=p.sequence.id;p.isContinuity=true;A.setSequence(s,{sequences:[p.sequence]});}s.sceneBuilder.insertPlayback(p,c.viewId,a);if(p.sequenceId){var e=s.sceneBuilder.getSequence(p.sequenceId);if(e){continue;}else{b.add(p.sequenceId);s.sequenceIds.add(p.sequenceId);}}}r.sequenceIdSet=b;r.viewId=c.viewId;s.currentViewId=r.viewId;return r;};A.setSequence=function(s,c){if(T.checkError(c)){return c;}var r={};var t=new Set();for(var a=0;a<c.sequences.length;a++){var b=c.sequences[a];var i=[];if(b.nodes){for(var n=0;n<b.nodes.length;n++){var d=b.nodes[n];if(d.trackId==null){d.trackId=b.id+d.binding+d.sid;d.track.id=d.trackId;i.push(d.track);}}}s.sceneBuilder.insertSequence(b);if(i.length>0){this.setTrack(s,{tracks:i});}if(b.nodes){for(var e=0;e<b.nodes.length;e++){var f=b.nodes[e];if(f.track==null){t.add(f.trackId);s.trackIds.add(f.trackId);}}}s.sequenceIds.delete(b.id);}r.trackIdSet=t;return r;};A.setTrack=function(s,c){if(T.checkError(c)){return c;}var r={};s.sceneBuilder.insertTracks(c.tracks);for(var t=0;t<c.tracks.length;t++){var a=c.tracks[t];s.trackIds.delete(a.id);}return r;};A.setHighlightStyle=function(s,c){if(T.checkError(c)){return c;}var r={};s.sceneBuilder.insertHighlightStyle(c);s.highlightStyleIds.delete(c.id);r.id=c.id;return r;};return A;});
