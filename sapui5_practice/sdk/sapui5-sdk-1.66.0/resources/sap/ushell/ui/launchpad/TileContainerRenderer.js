// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["jquery.sap.global","sap/ushell/resources","sap/ushell/utils","sap/ushell/bootstrap/common/common.load.model","sap/ushell/Config"],function(q,r,u,m,C){"use strict";var T={};T.oModel=m.getModel();function _(M){var c=+M["sap.flp"].columns;return c*5.35+(c-1)*0.5+"rem";}function a(M){var R=+M["sap.flp"].rows;return R*5.35+(R-1)*0.5+"rem";}T.render=function(R,c){var t=c.getTiles(),h=c.getHeaderActions(),b=c.getBeforeContent(),A=c.getAfterContent(),f=c.getFooterContent()||[],v=false,d,l=c.getLinks(),e=this;R.write("<div");R.writeControlData(c);R.addClass("sapUshellTileContainer");R.writeClasses();R.write(">");if(b.length){R.write("<div");R.addClass("sapUshellTileContainerBeforeContent");R.addClass("sapContrastPlus");if(!this.oModel.getProperty("/tileActionModeActive")){R.addClass("sapUshellTileContainerRemoveContent");}R.writeClasses();R.write(">");q.each(b,function(){R.renderControl(this);});R.write("</div>");}R.write("<div");R.addClass("sapUshellTileContainerContent");if(c.getIsGroupLocked()){R.addClass("sapUshellTileContainerLocked");}if(c.getDefaultGroup()){R.addClass("sapUshellTileContainerDefault");}if(c.getShowBackground()){R.addClass("sapUshellTileContainerEditMode");}R.writeClasses();R.writeAttribute("tabindex","-1");R.write(">");if(c.getShowBackground()){R.write("<div");R.addClass("sapUshellGroupBackgroundContainer sapContrastPlus");R.writeClasses();R.write(">");R.write("</div>");}if(c.getShowHeader()){R.write("<div");R.addClass("sapUshellTileContainerHeader sapContrastPlus");if(!c.getShowGroupHeader()||(c.getHomePageGroupDisplay()==="tabs"&&!c.getTileActionModeActive())){R.addClass("sapUshellFirstGroupHeaderHidden sapUiPseudoInvisibleText");}R.writeAttribute("id",c.getId()+"-groupheader");R.writeClasses();if(c.getIeHtml5DnD()&&!c.getIsGroupLocked()&&!c.getDefaultGroup()&&c.getTileActionModeActive()){R.writeAttribute("draggable","true");}var s;if(c.getDefaultGroup()){s=r.i18n.getText("ariaLabelEditModeGroupDefault",c.getHeaderText());}else if(c.getIsGroupLocked()){s=r.i18n.getText("ariaLabelEditModeGroupLocked",c.getHeaderText());}else{s=r.i18n.getText("ariaLabelEditModeGroup",c.getHeaderText());}R.writeAccessibilityState(c,{label:s});R.write(">");R.write("<div");R.writeAttribute("id",c.getId()+"-title");R.write(">");R.write("<");R.write(c.getHeaderLevel().toLowerCase());R.addClass("sapUshellContainerTitle");R.writeClasses();R.writeAttributeEscaped("title",c.getHeaderText());R.writeAttribute("id",c.getId()+"-titleText");R.writeAttribute("data-role","group");R.write(">");R.writeEscaped(c.getHeaderText());R.write("</");R.write(c.getHeaderLevel().toLowerCase());R.writeAttribute("id",c.getId()+"-groupheader");R.write(">");if(c.getShowIcon()){c.oIcon.removeStyleClass("sapUshellContainerIconHidden");}else{c.oIcon.addStyleClass("sapUshellContainerIconHidden");}R.renderControl(c.oIcon);R.renderControl(c.oEditInputField);R.write("<div");R.addClass("sapUshellContainerHeaderActions");R.writeClasses();R.write(">");q.each(h,function(){R.renderControl(this);});R.write("</div>");R.write("</div>");R.write("</div>");}R.write("<ul");d=c.data("containerHeight");if(d){R.writeAttribute("style","height:"+d);}R.addClass("sapUshellTilesContainer-sortable");R.addClass("sapUshellInner");R.writeClasses();R.writeAccessibilityState(c,{label:c.getHeaderText(),role:"listbox"});R.write(">");var E=C.last("/core/shell/model/enableTrackingActivity");q.each(t,function(){if(this.getVisible()){v=true;}if(this.getVisible){if(this.isA("sap.ui.integration.widgets.Card")){this.setWidth(_(this.getManifest()));this.setHeight(a(this.getManifest()));R.write("<li");R.addClass("sapUshellTile sapUshellLockedTile");R.writeClasses();if(e._isUserActivityCard(this)){e._updateUserActivityCardVisibility(this);this.setVisible(E);}R.writeAttribute("style","min-width: 0rem; min-height: 0rem;");R.write(">");R.renderControl(this);R.write("</li>");}else{R.renderControl(this);}}});if(c.getShowPlaceholder()){R.renderControl(c.oPlusTile);}if(c.getShowNoData()){this.renderNoData(R,c,!t.length||!v);}R.write("</ul>");var L=c.getSupportLinkPersonalization();if(l.length>0||L){if(c.getShowBackground()&&!(c.getIsGroupLocked()&&t.length===0)){R.write("<div");R.addClass("sapUshellTilesContainerSeparator");R.writeClasses();R.write(">");R.write("</div>");}R.write("<div aria-hidden='true'");var g=L?"sapUshellLineModeContainer":"sapUshellLinksContainer";R.addClass(g);if(!l.length&&L){R.addClass("sapUshellNoLinksAreaPresent");R.writeClasses();R.write(">");R.write("<div");R.addClass("sapUshellNoLinksAreaPresentText");R.writeClasses();R.write(">");R.renderControl(c.getNoLinksText());R.write("</div>");}else{R.writeClasses();R.write(">");}if(L){R.write("<div");R.addClass("sapUshellTransformationError");R.writeClasses();if(!c.transformationError){R.writeAttribute("style","display: none;");}R.write(">");R.write("<div");R.addClass("sapUshellTransformationErrorInnerWrapper");R.writeClasses();R.write(">");R.renderControl(c.getTransformationErrorIcon());R.renderControl(c.getTransformationErrorText());R.write("</div>");R.write("</div>");}if(L){R.write("<div class='sapUshellLinksInnerContainer'>");}l.map(function(i,j,l){if(L){var k=new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true});i.getCustomData().map(function(n){if(n.getKey()=="tabindex"&&n.getValue("0")){k=n;}i.removeCustomData(n);});i.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-posinset",value:(j+1).toString(),writeToDom:true}));i.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-setsize",value:l.length.toString(),writeToDom:true}));i.addCustomData(k);i.addStyleClass("sapUshellLinkTile");if(c.getIsGroupLocked()){i.addStyleClass("sapUshellLockedTile");}}R.renderControl(i);});if(L){R.write("</div>");}R.write("</div>");}if(f.length>0){R.write("<footer");R.addClass("sapUshellTilesContainerFtr");R.writeClasses();R.write(">");q.each(f,function(){R.renderControl(this);});R.write("</footer>");}R.write("</div>");if(A.length){R.write("<div");R.addClass("sapUshellTileContainerAfterContent");R.addClass("sapContrastPlus ");if(!this.oModel.getProperty("/tileActionModeActive")){R.addClass("sapUshellTileContainerRemoveContent");}R.writeClasses();R.write(">");q.each(A,function(){R.renderControl(this);});R.write("</div>");}R.write("</div>");u.setPerformanceMark("FLP -- tile container renderer");};T.renderNoData=function(R,c,d){R.write("<div id='"+c.getId()+"-listNoData' class='sapUshellNoFilteredItems sapUiStrongBackgroundTextColor'>");if(d){if(c.getNoDataText()){R.writeEscaped(c.getNoDataText());}else{R.writeEscaped(c.getNoDataText(r.i18n.getText("noFilteredItems")));}}else{R.writeEscaped("");}R.write("</div>");};T._isUserActivityCard=function(c){if(typeof c.getManifest!=="function"){return;}var M=c.getManifest();var s=M&&M["sap.card"]&&M["sap.card"].header&&M["sap.card"].header.title;return s===r.i18n.getText("recentActivities")||s===r.i18n.getText("frequentActivities");};T._updateUserActivityCardVisibility=function(c){C.on("/core/shell/model/enableTrackingActivity").do(function(e){c.setVisible(e);});};return T;},true);
