sap.ui.require.preload({"sap/ushell/components/homepage/ActionMode.js":function(){
// ${copyright}
sap.ui.define(["sap/ushell/Config"],function(C){"use strict";var A=function(){this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe("launchpad","actionModeInactive",this.scrollToViewPoint,this);this.oEventBus.subscribe("launchpad","actionModeActive",this.scrollToViewPoint,this);this.viewPoint=undefined;this.init=function(m){this.oModel=m;};};A.prototype.activate=function(){var t;this.oModel.setProperty("/tileActionModeActive",true);this.aOrigHiddenGroupsIds=sap.ushell.utils.getCurrentHiddenGroupIds(this.oModel);var d=sap.ui.getCore().byId("dashboardGroups");d.addLinksToUnselectedGroups();t=sap.ui.getCore().byId("ActionModeBtn");if(t){t.setTooltip(sap.ushell.resources.i18n.getText("exitEditMode"));t.setText(sap.ushell.resources.i18n.getText("exitEditMode"));if(t.data("isShellHeader")){t.setSelected(true);}}this.oEventBus.publish("launchpad","actionModeActive");};A.prototype.scrollToViewPoint=function(){var d=this.viewPoint;d.restoreLastFocusedTile=true;if(!this.oModel.getProperty("/tileActionModeActive")){var j=jQuery(".sapUshellTileContainerHeader[tabindex=0]");if(j&&j.length>0){var a=j[0].closest(".sapUshellTileContainer");if(a){d.restoreLastFocusedTileContainerById=a.id;}}}d.iDuration=0;window.setTimeout(jQuery.proxy(this.oEventBus.publish,this.oEventBus,"launchpad","scrollToGroup",d),0);};A.prototype.deactivate=function(){var t=sap.ui.getCore().byId("TileActions"),T;this.oModel.setProperty("/tileActionModeActive",false);this.oEventBus.publish("launchpad","actionModeInactive",this.aOrigHiddenGroupsIds);if(t!==undefined){t.destroy();}sap.ui.require(["sap/m/MessageToast"],function(M){M.show(sap.ushell.resources.i18n.getText("savedChanges"),{duration:4000});});T=sap.ui.getCore().byId("ActionModeBtn");if(T){T.setTooltip(sap.ushell.resources.i18n.getText("activateEditMode"));T.setText(sap.ushell.resources.i18n.getText("activateEditMode"));if(T.data("isShellHeader")){T.setSelected(false);}}};A.prototype.toggleActionMode=function(m,s,d){var t=m.getProperty("/tileActionModeActive"),c=m.getProperty("/topGroupInViewPortIndex"),h=m.getProperty("/homePageGroupDisplay"),g=m.getProperty("/groups")||[],f=null,n=0;if(!d){d=[];}var v=d.filter(function(i){return i.getVisible();});g.forEach(function(o,i){if(o.isGroupVisible&&o.visibilityModes[t?0:1]){n+=1;if(f===null){f=i;}o.showGroupHeader=true;}});if(n>1){g[f].showGroupHeader=false;}var G=C.last("/core/home/gridContainer");if(!t&&G){g[f].showGroupHeader=true;}var a=v[c];if(a){var e=t?-49:49;var b=(h==="tabs")?d[0].getDomRef():a.getDomRef();var S=0;if(b){S=b.offsetTop;}var j=document.getElementById("sapUshellDashboardPage-cont").scrollTop-S;this.viewPoint={group:v[c],fromTop:j+e};}else{this.viewPoint={fromTop:0};}if(t){this.deactivate();}else{this.activate();}};A.prototype.activateGroupEditMode=function(g){var j=jQuery(g.getDomRef()).find(".sapUshellTileContainerContent");j.addClass("sapUshellTileContainerEditMode");};A.prototype._openActionsMenu=function(e,v){var t=this,T=v||e.getSource(),l=sap.ushell.Container.getService("LaunchPage"),a=[],o=sap.ui.getCore().byId("TileActions"),i,n,b,c,d,h,f,g;if(T){d=T.getBindingContext().getObject().object;a=l.getTileActions(d);}t.oTileControl=T;jQuery(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");f=jQuery(e.getSource().getDomRef()).find(".sapUshellTileActionLayerDiv");f.addClass("sapUshellTileActionLayerDivSelected");if(o===undefined){o=new sap.m.ActionSheet("TileActions",{placement:sap.m.PlacementType.Bottom,afterClose:function(){$(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");var E=sap.ui.getCore().getEventBus();E.publish("dashboard","actionSheetClose",t.oTileControl);}});}else{o.destroyButtons();}var j=T.getModel();var G=T.getParent().getBindingContext().getPath();if(a.length===0||j.getProperty(G+"/isGroupLocked")){n=new sap.m.Button({text:sap.ushell.resources.i18n.getText("tileHasNoActions"),enabled:false});o.addButton(n);}else{for(i=0;i<a.length;i++){c=a[i];h=function(c){return function(){t._handleActionPress(c,T);};}(c);b=new sap.m.Button({text:c.text,icon:c.icon,press:h});o.addButton(b);}}g=e.getSource().getActionSheetIcon?e.getSource().getActionSheetIcon():undefined;if(g){o.openBy(g);}else{var m=sap.ui.getCore().byId(e.getSource().getId()+"-action-more");if(m){o.openBy(m);}else{o.openBy(e.getSource());}}};A.prototype._handleActionPress=function(a,t){if(a.press){a.press.call(a,t);}else if(a.targetURL){if(a.targetURL.indexOf("#")===0){hasher.setHash(a.targetURL);}else{window.open(a.targetURL,"_blank");}}else{sap.ui.require(["sap/m/MessageToast"],function(M){M.show("No Action");});}};return new A();},true);},"sap/ushell/components/homepage/Component.js":function(){sap.ui.define(['sap/ushell/components/HomepageManager','sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/homepage/ComponentKeysHandler','sap/ushell/UserActivityLog','sap/ushell/Config','sap/ushell/bootstrap/common/common.load.model',"sap/ushell/components/SharedComponentUtils"],function(H,r,U,C,a,b,m,s){"use strict";return U.extend("sap.ushell.components.homepage.Component",{metadata:{version:"${version}",library:"sap.ushell.components.homepage",dependencies:{libs:["sap.m"]},config:{semanticObject:'Shell',action:'home',title:r.i18n.getText("homeBtn_tooltip"),fullWidth:true,hideLightBackground:true}},init:function(){this.oModel=m.getModel();this.setModel(this.oModel);U.prototype.init.apply(this,arguments);var d={model:this.oModel,view:this.oDashboardView};this.oHomepageManager=new H("dashboardMgr",d);this.setModel(r.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted",function(){sap.ui.require(["sap/ushell/components/homepage/FLPAnalytics"]);});s.toggleUserActivityLog();s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");b.on("/core/home/homePageGroupDisplay").do(function(n){this.oHomepageManager.handleDisplayModeChange(n);}.bind(this));s.getEffectiveHomepageSetting("/core/home/sizeBehavior","/core/home/sizeBehaviorConfigurable");b.on("/core/home/sizeBehavior").do(function(S){var M=this.oHomepageManager.getModel();M.setProperty("/sizeBehavior",S);}.bind(this));this.setInitialConfiguration();},createContent:function(){this.oDashboardView=sap.ui.view({viewName:"sap.ushell.components.homepage.DashboardContent",type:"JS",async:true});return this.oDashboardView;},setInitialConfiguration:function(){sap.ui.getCore().getEventBus().publish("launchpad","initialConfigurationSet");},exit:function(){m.unsubscribeEventHandlers();this.oHomepageManager.destroy();}});});},"sap/ushell/components/homepage/ComponentKeysHandler.js":function(){sap.ui.define(["sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/Config"],function(A,C){"use strict";var a=function(){};a.prototype={keyCodes:jQuery.sap.KeyCodes,tileFocusCustomData:new A({key:"tabindex",value:"0",writeToDom:true}),goToTileContainer:function(){if(this.oModel.getProperty('/tileActionModeActive')){this.goToFirstVisibleTileContainer();}else{this.goToLastVisitedTile();}},goToFirstVisibleTileContainer:function(){var j=jQuery("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");if(j.length){var b=jQuery(j.get(t));if(b.length){this._setTileContainerSelectiveFocus(b);}}},goToLastVisitedTile:function(j,l){var b,d,e=jQuery(".sapUshellTile, .sapFCard, .sapMGTLineMode");if(l){var f=jQuery("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");var g=j||jQuery(f.get(t));var h=g.find(".sapUshellTile, .sapFCard, .sapMGTLineMode");b=h.filter(":visible").eq(0);d=h.filter("[tabindex=0]:visible").eq(0);if(!b.length){b=e.filter(":visible").eq(0);}}else{b=e.filter(":visible").eq(0);d=e.filter("[tabindex=0]:visible").eq(0);}if(d.length){this._moveScrollDashboard(d);}else if(b.length){b.attr("tabindex","0");this._moveScrollDashboard(b);}},_goToFirstTileOfNextGroup:function(d,e){this._preventDefault(e);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(d,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n);}}},_goToTileOfGroup:function(p,g){if(g){var b=g.getTiles();if(this.oModel.getProperty('/tileActionModeActive')){b.push(g.oPlusTile);}b=b.concat(g.getLinks());p=p==="first"?0:p;p=p==="last"?b.length-1:p;var t=b[p];if(t&&t.getDomRef()){var j=jQuery(t.getDomRef());if(j.length===1){this._moveScrollDashboard(j);return true;}}}return false;},_moveTile:function(d){var i=this._getGroupAndTilesInfo(),D=this._getNextTile(d,true,i);if(D){var o=D.getParent();if(C.last("/core/home/gridContainer")&&o.getParent().getId()!=="dashboardGroups"){o=o.getParent();}var s=D.getMode?D.getMode():'ContentMode',b=i.oCurTile.getMode?i.oCurTile.getMode():'ContentMode',e=s==='LineMode'?o.getLinks():o.getTiles(),n=0;if(i.oGroup===o){n=e.indexOf(D);if(b==="LineMode"&&s==="ContentMode"&&d==="left"){n=e.length;}}else if(d==="left"||d==="up"){n=e.length;}var E,f,t=this;if(b===s){var g=jQuery(".sapUshellDashboardView").control(0);E="movetile";f={sTileId:g.getController()._getTileUuid(i.oCurTile),toGroupId:o.getGroupId?o.getGroupId():o.groupId,toIndex:n,sToItems:b==='LineMode'?'links':'tiles',sFromItems:b==='LineMode'?'links':'tiles',sTileType:b==='LineMode'?'link':'tile'};if(s==="LineMode"){f.callBack=function(){setTimeout(function(){e=s==='LineMode'?o.getLinks():o.getTiles();t._moveScrollDashboard(e[n].$());},10);};}else{setTimeout(function(){e=s==='LineMode'?o.getLinks():o.getTiles();t._moveScrollDashboard(e[n].$());},10);}}else{E="convertTile";f={toGroupId:o.getGroupId?o.getGroupId():o.groupId,srcGroupId:i.oGroup.getGroupId?i.oGroup.getGroupId():i.oGroup.groupId,toIndex:n,callBack:function(){setTimeout(function(){e=s==='LineMode'?o.getLinks():o.getTiles();t._moveScrollDashboard(e[n].$());},10);},tile:i.oCurTile,longDrop:false};}sap.ui.getCore().getEventBus().publish("launchpad",E,f);}},callbackSetFocus:function(t){var b=this;setTimeout(function(){if(t.oParent&&t.oParent instanceof sap.ushell.ui.launchpad.Tile){b._moveScrollDashboard(jQuery(t.oParent.getDomRef()));}else{b._moveScrollDashboard(t.$());}});},_getTileCenter:function(d,t,T){if(!(T instanceof HTMLElement)){var j=T.$().find(".sapMGTLineStyleHelper");if(T.isLink&&j&&j.length>1){if(d==="down"){return t.right;}return t.left;}}return t.right-((t.right-t.left)/2);},_getTileRect:function(d,t){if(t instanceof HTMLElement){return t.getBoundingClientRect();}var j=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&j&&j.length){if(d==="down"){return j.get(j.length-1).getBoundingClientRect();}else{return j.get(0).getBoundingClientRect();}}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect();}},_findClosestTile:function(d,t,o){var b=this._getTileRect(d,o),n=this._getTileCenter(d,b,o);var e,f=Infinity,g=d==="down"?1:-1,h=t.indexOf(o)+g,i;for(;;h+=g){var T=t[h];if(!T){return e;}if(!e){if(d==="down"&&h===t.length-1){return T;}if(d==="up"&&h===0){return T;}}var j=this._getTileRect(d,T);if(!j){return e;}if(d==="down"&&b.bottom+5>=j.bottom){continue;}if(d==="up"&&b.top-5<=j.top){continue;}if(e&&i!=j.top){return e;}i=j.top;var k=Math.min(Math.abs(j.left-n),Math.abs(j.right-n));if(f>k){f=k;e=T;}else{return e;}}},_getNextTile:function(d,m,g){var i=g||this._getGroupAndTilesInfo(),l=true;var n;var N;var G;var b;if(!i||(m&&i.oGroup.getProperty('isGroupLocked'))){return null;}if(m){var t=i.oCurTile.getBindingContext().getObject().object;l=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported(t);}if(d==="right"||d==="left"){var f=i.oCurTile.isLink?i.aLinks:i.aTiles,e=f.indexOf(i.oCurTile),h=d==="right"?e+1:e-1;if(f[h]&&f[h].getDomRef()){if(m&&f[h]===i.oGroup.oPlusTile){}else{return f[h];}}if(d==="right"&&!i.oCurTile.isLink&&i.aLinks.length&&l){return i.aLinks[0];}if(d==="left"&&i.oCurTile.isLink&&i.aTiles.length){return i.oGroup.getShowPlaceholder()?i.oGroup.oPlusTile:i.aTiles[i.aTiles.length-1];}}var o=this._getNextGroup(d,i.oGroup,m,l);if(o){n=o.getTiles();N=o.getLinks();if(d==="right"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(n.length===0){return N[0];}else{return n[0];}}if(d==="left"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(N.length===0){return n[n.length-1];}else{return N[N.length-1];}}}if(d==="down"||d==="up"){G=l?i.aTiles.concat(i.aLinks):i.aTiles;b=[];if(o){var j=o.getTiles(),k=o.getLinks();b=l?j.concat(k):j;if(b.length===0){b.push(o.oPlusTile);}}var J=(d==="down")?G.concat(b):b.concat(G);return this._findClosestTile(d,J,i.oCurTile);}},_getNextGroup:function(d,o,m,l){var n,g=o.getParent().getGroups(),b=g.indexOf(o),e=b;if(d==="down"||d==="right"){n=1;}else{n=-1;}e+=n;while(g[e]){var N=g[e],f=N.getTiles(),h=N.getLinks();var i=l?f.concat(h):f;var I=N.getVisible()&&!(N.getIsGroupLocked()&&m)&&!(N.getIsGroupLocked()&&i.length===0)&&!(i.length===0&&!(m||this.oModel.getProperty('/tileActionModeActive')));if(I){return N;}e+=n;}},_getGroupAndTilesInfo:function(){var j=this._getFocusOnTile(jQuery(document.activeElement));if(!j||!j.length){return null;}var o=j.control(0);o.isLink=j.hasClass('sapUshellLinkTile')||j.hasClass('sapMGTLineMode');var g=j.closest(".sapUshellTileContainer").control(0);if(!g){return null;}var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return{oCurTile:o,oGroup:g,aTiles:t,aLinks:g.getLinks()};},_goToSiblingElementInTileContainer:function(d,j){var b=j.closest('.sapUshellTileContainer'),e,f,g;e=j.closest('.sapUshellTileContainerBeforeContent');if(e.length){if(d==='up'||d==="left"){this._goToNextTileContainer(e,d);}else{g=b.find(".sapUshellTileContainerHeader").eq(0);this._setTabIndexOnTileContainerHeader(g);g.focus();}return;}e=j.closest('.sapUshellTileContainerHeader');if(e.length){if(d==='up'){this._setTabIndexOnTileContainerHeader(g);if(!this._goToTileContainerBeforeContent(b)){this._goToNextTileContainer(e,d);}}else if(d==="down"){f=b.find(".sapUshellTile, .sapFCard, .sapUshellLinkTile").eq(0);if(f.length){this._moveScrollDashboard(f);}else{this._goToNextTileContainer(e,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(b)){this._goToNextTileContainer(e,"left");}}else{g=j.closest(".sapUshellTileContainerHeader");g.focus();}}else if(d==="right"){var h=j.hasClass("sapMInputBaseInner");if(!h){f=b.find(".sapUshellTile, .sapFCard, .sapUshellLinkTile").eq(0);if(f.length){this._moveScrollDashboard(f);}else{this._goToNextTileContainer(e,"down");}}}return;}e=this._getFocusOnTile(j);if(e){this._goFromFocusedTile(d,e,true);return;}e=j.closest('.sapUshellTileContainerAfterContent');if(e.length){if(d==='up'||d==="left"){this._goToTileOfGroup("first",e.control(0));}else{this._goToNextTileContainer(e,d);}}},_goToNextTileContainer:function(j,d){var b=j.closest('.sapUshellTileContainer');if(b.length===1){var e=jQuery(".sapUshellTileContainer").filter(":visible"),n=(d==='down')?1:-1,f=jQuery(e[e.index(b)+n]);if(f.length===1){var g=f.find('.sapUshellTileContainerHeader');if(d==='down'){if(!this._goToTileContainerBeforeContent(f)){this._setTabIndexOnTileContainerHeader(g);this._setTileContainerSelectiveFocus(f);}}else if(!this._goToTileContainerAfterContent(f)){if(d==="up"||d==="left"){var s=d==="up"?"first":"last";if(!this._goToTileOfGroup(s,f.control(0))){this._setTabIndexOnTileContainerHeader(g);g.focus();}}}}}},_goToTileContainerBeforeContent:function(j){var b=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),d=b.find(".sapUshellTileContainerBeforeContent button").filter(":visible");if(d.length){d.focus();return true;}else{return false;}},_goToTileContainerAfterContent:function(j){var b=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),d=b.find(".sapUshellTileContainerAfterContent button").filter(":visible");if(d.length){d.focus();return true;}else{return false;}},_goFromFocusedTile:function(d,$,i){var n=this._getNextTile(d);if(n){var N=n.$(),b=$.closest('.sapUshellTileContainer'),e=N.closest('.sapUshellTileContainer');if(i&&(b.get(0).id!==e.get(0).id)){if(d==='down'||d==='right'){if(!this._goToTileContainerAfterContent(b)){this._setTabIndexOnTileContainerHeader(e.find('.sapUshellTileContainerHeader'));this._setTileContainerSelectiveFocus(e);}}else if(d==='up'||d==='left'){var f=b.find('.sapUshellTileContainerHeader');this._setTabIndexOnTileContainerHeader(f);f.focus();}}else{this._moveScrollDashboard(N);}}},_setTabIndexOnTileContainerHeader:function(j){jQuery(".sapUshellTileContainerHeader").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var b=j.find(".sapUshellContainerTitle").eq(0),d=j.find(".sapUshellContainerHeaderActions").eq(0);j.attr('tabindex',0);b.attr('tabindex',0);d.find('button').attr('tabindex',0);}},_setTileContainerSelectiveFocus:function(j){var b=jQuery("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),d=j.find(".sapUshellTileContainerBeforeContent button"),e=j.find(".sapUshellTileContainerHeader").eq(0),B=d.length&&d.is(":visible");if(B){d.focus();}else if(j.get(0)===b.get(0)){this.goToLastVisitedTile();}else if(e.length){this._setTabIndexOnTileContainerHeader(e);e.focus();}},setTileFocus:function(j){if(!j.hasClass('sapUshellPlusTile')){if(j.parents('#catalogView').length>0){this.setFocusOnCatalogTile(j.find('[tabindex]').eq(0));}}var b=jQuery(".sapUshellTile, .sapFCard, .sapMGTLineMode, .sapUshellLinkTile, .sapMGT").filter("[tabindex=0]").get();for(var i=0;i<b.length;i++){b[i].setAttribute("tabindex","-1");}if(j.length>0){j.attr("tabindex",0);if(j.prop("tagName")==="DIV"&&jQuery(j).hasClass("sapUshellLinkTile")&&j.getMode==undefined){j=j.find("a").length?j.find("a")[0]:j;}j.focus();if(j[0]&&j[0].id){var t=sap.ui.getCore().byId(j[0].id);var d=this.tileFocusCustomData.getParent&&this.tileFocusCustomData.getParent();if(d){d.removeAggregation("customData",this.tileFocusCustomData,true);}if(t&&sap.ui.getCore().byId(t.getId())&&this.tileFocusCustomData&&sap.ui.getCore().byId(this.tileFocusCustomData.getId())){t.addAggregation("customData",this.tileFocusCustomData,true);}}}},setFocusOnCatalogTile:function(j){var p=jQuery(".sapUshellTile[tabindex=0]"),b,v;if(p.length){jQuery(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(h){jQuery(h).attr("tabindex",-1);});b=p.find('[tabindex], a').andSelf().filter('[tabindex], a');b.attr("tabindex",-1);}if(!j){v=jQuery(".sapUshellTile, .sapUshellAppBox").filter(":visible");if(v.length){j=jQuery(v[0]);}else{return;}}j.attr("tabindex",0);j.find("button").attr("tabindex",0);j.focus();},_moveScrollDashboard:function(t){if(!t.length){return;}var f=t[0].parentElement.firstChild;var d=document.getElementById("dashboardGroups");var y=f.getBoundingClientRect().top-d.getBoundingClientRect().top;jQuery('#sapUshellDashboardPage section').stop().animate({scrollTop:y},0,function(){this.setTileFocus(t);}.bind(this));},_moveGroupFromDashboard:function(d,j){var b,t=jQuery(".sapUshellDashboardGroupsContainerItem"),i,e;b=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(b);e=d=="up"||d=="left"?i-1:i+1;this._moveGroup(i,e);},_moveGroup:function(f,t){if(t<0||t>=jQuery(".sapUshellDashboardGroupsContainerItem").length||t<jQuery(".sapUshellDisableDragAndDrop").length){return;}sap.ui.getCore().getEventBus().publish("launchpad","moveGroup",{fromIndex:f,toIndex:t});var b=this;setTimeout(function(){var d=jQuery(".sapUshellTileContainerHeader")[t];b._setTabIndexOnTileContainerHeader(jQuery(d));jQuery(d).focus();},100);},_getFocusOnTile:function(j){var b;['.sapUshellTile','.sapFCard','.sapUshellLinkTile'].forEach(function(s){var d=j.closest(s);if(d.length){b=d;}});return b;},_renameGroup:function(j){if(j.closest('.sapUshellTileContainerHeader').length===1){j=j[0].tagName==='H2'?j:j.find("h2");j.click();}},_arrowsButtonsHandler:function(d,e,j){var i=this.oModel.getProperty('/tileActionModeActive');if((i&&j.hasClass('sapMInputBaseInner'))||j.hasClass("sapMITBFilter")){return;}else{this._preventDefault(e);}if(j.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(d,j);return;}var b=this._getFocusOnTile(j);if(e.ctrlKey===true&&this.oModel.getProperty("/personalization")){var f=j.closest('.sapUshellTileContainerHeader');if(b){this._moveTile(d,b);}else if(f.length){var g=f.closest('.sapUshellTileContainerContent');if(!g.hasClass('sapUshellTileContainerDefault')||!g.hasClass('sapUshellTileContainerLocked')){this._moveGroupFromDashboard(d,f);}}}else if(i){this._goToSiblingElementInTileContainer(d,j);}else if(b){this._goFromFocusedTile(d,b,i);}else if(!j.hasClass("sapUshellActionItem")){this.goToLastVisitedTile();}},_handleAnchorNavigationItemsArrowKeys:function(d,j){var b=jQuery(".sapUshellAnchorItem").filter(":visible"),n=b.index(j),N=j;if(d==="left"||d==="up"){if(n>0){N=b.get(n-1);}}else if(d==="right"||d==="down"){if(n<b.length-1){N=b.get(n+1);}}this._setAnchorItemFocus(jQuery(N));},_setAnchorItemFocus:function(j){jQuery(".sapUshellAnchorItem").get().forEach(function(h){jQuery(h).attr("tabindex",-1);});j.attr("tabindex",0);j.focus();},_appFinderHomeEndButtonsHandler:function(d,e,j){var v=jQuery(".sapUshellTile, .sapUshellAppBox").filter(":visible"),b;if(v.length){if(d==="home"){b=jQuery(v.get(0));}if(d==="end"){b=jQuery(v.get(v.length-1));}}if(b){this._preventDefault(e);this._appFinderFocusAppBox(j,b);}},_homeEndButtonsHandler:function(s,e,j){if(j.hasClass("sapUshellAnchorItem")){this._preventDefault(e);this._setAnchorItemFocus(jQuery(".sapUshellAnchorItem").filter(":visible:"+s));}else if(e.ctrlKey===true){this._preventDefault(e);var b=jQuery(".sapUshellTile").filter(":visible")[s]();this._moveScrollDashboard(b);}else{var d=j.closest('.sapUshellTileContainer');if(d){var g=d.control(0);if(g){this._preventDefault(e);this._goToTileOfGroup(s,g);}}}},_deleteButtonHandler:function(j){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var b=this._getFocusOnTile(j);if(b&&!b.hasClass('sapUshellLockedTile')&&!b.hasClass('sapUshellPlusTile')){var i=this._getGroupAndTilesInfo();if(i){var d=jQuery(".sapUshellDashboardView").control(0),t=d.getController()._getTileUuid(i.oCurTile),e=this;setTimeout(function(){if(i.oCurTile.getDomRef()){e._moveScrollDashboard(i.oCurTile.$());}else{e._moveScrollDashboard(i.oGroup.oPlusTile.$());}},100);sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",{tileId:t},this);}}}},_ctrlPlusArrowKeyButtonsHandler:function(d){var j=jQuery(document.activeElement),b=j.closest('.sapUshellTileContainerHeader');if(this._getFocusOnTile(j)){this._moveTile(d);}else if(b.length){var e=b.closest('.sapUshellTileContainerContent');if(!e.hasClass('sapUshellTileContainerDefault')||!e.hasClass('sapUshellTileContainerLocked')){this._moveGroupFromDashboard(d,b);}}},_spaceButtonHandler:function(e,j){if(this._getFocusOnTile(j)){e.preventDefault();j.click(j);if(j.control(0).getUuid){sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick",{uuid:j.control(0).getUuid()});}}else{j.click();}},_enterButtonHandler:function(j){if(j.hasClass('sapMInputBaseInner')){var b=j.closest('.sapUshellTileContainerHeader'),t=this;if(b.length===1){setTimeout(function(){b=jQuery("#"+b[0].id);t._setTabIndexOnTileContainerHeader(b);b.focus();},10);}}if(this._getFocusOnTile(j)){j.click(j);if(j.control(0).getUuid){sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick",{uuid:j.control(0).getUuid()});}}},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(jQuery(".sapUshellAnchorItemSelected"));return jQuery(document.activeElement).hasClass("sapUshellAnchorItemSelected");},handleFocusOnMe:function(e,f){var r=sap.ushell.Container.getRenderer("fiori2"),h=c;if(r){var s=r.getCurrentCoreView();if(s==="home"){if(f){if(e.shiftKey){var d=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(d){d.focus();}else{h.goToLastVisitedTile();}}else if(!h.goToSelectedAnchorNavigationItem()){h.goToLastVisitedTile();}}else{h._dashboardKeydownHandler(e);}}if(s==="appFinder"){if(f){if(e.shiftKey){h.setFocusOnCatalogTile();}else{var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o&&o.getVisible()){o.focus();}else{h.appFinderFocusMenuButtons(e);}}}else{h._appFinderKeydownHandler(e);}}}},_groupHeaderNavigation:function(j){var b;if(j.hasClass("sapUshellTileContainerHeader")){b=j.find(".sapUshellContainerTitle");b.focus();}else if(j.closest(".sapUshellTileContainerHeader")){b=j.closest(".sapUshellTileContainerHeader");b.focus();}},_appFinderFocusAppBox:function(j,b){if(j&&b){j.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");b.attr("tabindex","0").focus();b.find(".sapUshellPinButton").attr("tabindex","0");}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();},_getNextCatalog:function(d,j){var b;if(d==="down"||d==="right"){b=j.next();}else if(d==="up"||d==="left"){b=j.prev();}else{jQuery.sap.log.error("Direction is unkown",d,"sap.ushell.components.homepage.ComponentKeysHandler");return null;}if(b.length>0){var n=b.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(n>0){return b;}else{return this._getNextCatalog(d,b);}}},_getNextCatalogItem:function(d,j,p){var b=jQuery(j.parents()[2]),e=b.find("li.sapUshellAppBox, li.sapUshellTile").get();if(d==="right"||d==="left"){var n=e.indexOf(j.get(0)),f=d==="right"?n+1:n-1;if(e[f]){return e[f];}}var g=this._getNextCatalog(d,b),N=g?g.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(N.length>0&&d==="right"){return N[0];}if(N.length>0&&d==="left"){return N[N.length-1];}if(d==="down"||d==="up"){if(N.length>0&&p){return N[0];}else{var J=(d==="down")?e.concat(N):N.concat(e);return this._findClosestTile(d,J,j.get(0));}}},_appFinderKeysHandler:function(d,e,j,p){if(j.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(e);var b=jQuery(this._getNextCatalogItem(d,j,p));if(b){this._appFinderFocusAppBox(j,b);}}},appFinderFocusMenuButtons:function(e){var b=jQuery("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(b.length){b.eq(0).focus();this._preventDefault(e);return true;}return false;},_appFinderKeydownHandler:function(e){var j=jQuery(document.activeElement);if(e.srcElement.id!=="appFinderSearch-I"){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL();if(i&&p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(i&&p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}switch(p){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",e,j,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",e,j,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",e,j);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;default:return;}}},_dashboardKeydownHandler:function(e){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL(),j=jQuery(document.activeElement);if(i){if(p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}}switch(p){case this.keyCodes.F2:this._renameGroup(j);break;case this.keyCodes.F7:this._groupHeaderNavigation(j);break;case this.keyCodes.DELETE:case this.keyCodes.BACKSPACE:this._deleteButtonHandler(j);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",e);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",e);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",e,j);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;case this.keyCodes.ENTER:this._enterButtonHandler(j);break;default:break;}return true;},init:function(m){this.oModel=m;}};var c=new a();return c;},true);},"sap/ushell/components/homepage/DashboardContent.controller.js":function(){sap.ui.define(["jquery.sap.global","./DashboardUIActions","sap/ushell/utils","sap/ushell/EventHub","sap/ui/Device","sap/ushell/components/homepage/ComponentKeysHandler"],function(q,D,u,E,a,C){"use strict";sap.ui.controller("sap.ushell.components.homepage.DashboardContent",{onInit:function(){var e=sap.ui.getCore().getEventBus();this.isActionModeInited=false;this.handleDashboardScroll=this._handleDashboardScroll.bind(this);e.subscribe("sap.ushell","appClosed",this._resizeHandler,this);e.subscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe("launchpad","actionModeInactive",this._handleGroupVisibilityChanges,this);e.subscribe("launchpad","animationModeChange",this._handleAnimationModeChange,this);e.subscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.addEventListener("visibilitychange",u.handleTilesVisibility,false);if(a.browser.mobile){e.subscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);}this.isDesktop=(a.system.desktop&&(navigator.userAgent.toLowerCase().indexOf("tablet")<0));this._setCenterViewPortShift();},onExit:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);e.unsubscribe("sap.ushell","appClosed",this._resizeHandler,this);e.unsubscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.unsubscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.removeEventListener("visibilitychange",u.handleTilesVisibility,false);},onAfterRendering:function(){u.setPerformanceMark("FLP - dashboard after rendering");var e=sap.ui.getCore().getEventBus(),m,t,g,i,b;e.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.unsubscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);e.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.subscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);e.unsubscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);e.subscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);a.orientation.attachHandler(function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible");if(j.length){m=this.getView().getModel();t=m.getProperty("/topGroupInViewPortIndex");if(j.get(t)){g=sap.ui.getCore().byId(j.get(t).id);i=m.getProperty("/editTitle");this._publishAsync("launchpad","scrollToGroup",{group:g,isInEditTitle:i});}}},this);q(window).bind("resize",function(){clearTimeout(b);b=setTimeout(this._resizeHandler.bind(this),300);}.bind(this));if(this.getView().getModel().getProperty("/personalization")&&!this.isActionModeInited){sap.ui.require(["sap/ushell/components/homepage/ActionMode"],function(A){A.init(this.getView().getModel());}.bind(this));this.isActionModeInited=true;}this._updateTopGroupInModel();},_setCenterViewPortShift:function(){var v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(true);}},_dashboardDeleteTileHandler:function(e){var t=e.getSource(),T=t.getBindingContext().getObject().object,d={originalTileId:sap.ushell.Container.getService("LaunchPage").getTileId(T)};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},dashboardTilePress:function(e){var t=e.getSource();if(!t){return;}var s=document.activeElement.id.indexOf("feedTile")!==-1;if(document.activeElement.tagName!=="INPUT"&&s!==true){if(sap.ui.getCore().byId(t.getId())){C.setTileFocus(t.$());}}sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick",{uuid:t.getUuid()});},_updateTopGroupInModel:function(){var m=this.getView().getModel(),t=this._getIndexOfTopGroupInViewPort();var s=this._getModelGroupFromVisibleIndex(t);m.setProperty("/iSelectedGroup",s);m.setProperty("/topGroupInViewPortIndex",t);},_getIndexOfTopGroupInViewPort:function(){var v=this.getView(),d=v.getDomRef(),s=d.getElementsByTagName("section"),j=q(s).find(".sapUshellTileContainer"),o=j.not(".sapUshellHidden").eq(0).offset(),f=(o&&o.top)||0,t=[],n=s[0].scrollTop,b=0;if(!j||!o){return b;}j.each(function(){if(!q(this).hasClass("sapUshellHidden")){var e=q(this).parent().offset().top;t.push([e,e+q(this).parent().height()]);}});var c=n+f;q.each(t,function(i,e){var g=e[0],h=e[1];if(g-24<=c&&c<=h){b=i;return false;}});return b;},_handleDashboardScroll:function(){var v=this.getView(),m=v.getModel(),n=400;var h=m.getProperty("/homePageGroupDisplay"),e=h!=="tabs",t=m.getProperty("/tileActionModeActive");function H(){u.handleTilesVisibility();}clearTimeout(this.timeoutId);this.timeoutId=setTimeout(H,n);if(!a.system.phone){v.oAnchorNavigationBar.closeOverflowPopup();}if(e||t){this._updateTopGroupInModel();}v.oAnchorNavigationBar.reArrangeNavigationBarElements();},_handleGroupDeletion:function(g){var e=sap.ui.getCore().getEventBus(),G=g.getObject(),i=G.removable,s=G.title,b=G.groupId,r=sap.ushell.resources.i18n,m=sap.ushell.Container.getService("Message"),A,c,v=this.getView();sap.ui.require(["sap/m/MessageBox"],function(M){A=M.Action;c=(i?A.DELETE:r.getText("ResetGroupBtn"));m.confirm(r.getText(i?"delete_group_msg":"reset_group_msg",s),function(o){if(o===c){e.publish("launchpad",i?"deleteGroup":"resetGroup",{groupId:b});}},r.getText(i?"delete_group":"reset_group"),[c,A.CANCEL]);v.oAnchorNavigationBar.updateVisibility();});},_modelLoaded:function(){this.bModelInitialized=true;sap.ushell.Layout.getInitPromise().then(function(){this._initializeUIActions();}.bind(this));},_initializeUIActions:function(){this.oDashboardUIActionsModule=new D();this.oDashboardUIActionsModule.initializeUIActions(this);},_forceBrowserRerenderElement:function(e){var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame;if(b){b(function(){var d=e.style.display;e.style.display="none";e.style.display=d;});}else{q.sap.log.info("unsupported browser for animation frame");}},_webkitMobileRenderFix:function(){if(a.browser.chrome||a.os.android){this._forceBrowserRerenderElement(document.body);}},_resizeHandler:function(){this._addBottomSpace();u.handleTilesVisibility();if(E.last("AppRendered")!==undefined){E.emit("AppRendered",undefined);}if(sap.ushell.Layout&&q("#dashboardGroups").is(":visible")){sap.ushell.Layout.reRenderGroupsLayout(null);this._initializeUIActions();}},_handleAnimationModeChange:function(c,e,d){var m=this.getView().getModel();m.setProperty("/animationMode",d.sAnimationMode);},_appOpenedHandler:function(c,e,d){var v,p,P,m=this.getView().getModel();p=this.getOwnerComponent();P=p.getMetadata().getComponentName();if(d.additionalInformation.indexOf(P)===-1){u.setTilesNoVisibility();v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(false);}}if(sap.ushell.components.homepage.ActionMode&&sap.ushell.components.homepage.ActionMode.oModel&&sap.ushell.components.homepage.ActionMode.oModel.getProperty("/tileActionModeActive")){sap.ushell.components.homepage.ActionMode.toggleActionMode(m,"Menu Item");}if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.disableAllDashboardUiAction();}},_addBottomSpace:function(){u.addBottomSpace();},_scrollToFirstVisibleGroup:function(c,e,d){var g,v=this.oView.oDashboardGroupsBox.getGroups(),f=d.fromTop>0?d.fromTop:0;if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}if(v){q.each(v,function(n,G){if(G.getGroupId()===g){var y=document.getElementById(G.sId).offsetTop;q(".sapUshellDashboardView section").stop().animate({scrollTop:y+f},0);C.setTileFocus(G.$().find("li").eq(0));return false;}});u.addBottomSpace();}},_scrollToGroupByName:function(c,e,d){var g=this.getView().getModel().getProperty("/groups"),G=d.groupName,l=sap.ushell.Container.getService("LaunchPage");q.each(g,function(n,o){if(l.getGroupTitle(o.object)===G){this._scrollToGroup(c,e,{groupId:o.groupId});}}.bind(this));},_scrollToGroup:function(c,e,d,i){var g,v=this.getView(),m=v.getModel(),M=m.getProperty("/animationMode")==="minimal",t=this;i=d.iDuration||500;if(M){i=0;}if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}t.iAnimationDuration=i;if(this.oView.oDashboardGroupsBox.getGroups()){q.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,G){if(G.getGroupId()===g){var y;setTimeout(function(){var o=G.getDomRef();var b=sap.ui.getCore().byId("dashboardGroups").getDomRef();y=o.getBoundingClientRect().top-b.getBoundingClientRect().top;var f=G.$().find(".sapUshellTileContainerHeader").height();var h=G.$().find(".sapUshellTileContainerBeforeContent").height();var I=G.getModel().getProperty("/tileActionModeActive");var A=t.oView.oAnchorNavigationBar.getDomRef().getBoundingClientRect().bottom;var s=sap.ui.getCore().byId("shell-header").getDomRef().getBoundingClientRect().bottom;var j=A-s;y=f>0&&!I?y+j:y+h+8;q(".sapUshellDashboardView section").stop().animate({scrollTop:y},t.iAnimationDuration,function(){var k=G.$();if(d.restoreLastFocusedTile){var l=false;if(d.restoreLastFocusedTileContainerById){k=q("#"+d.restoreLastFocusedTileContainerById);l=true;}C.goToLastVisitedTile(k,l);}else if(d.groupChanged){var p=k.find(".sapUshellTile, .sapMGTLineMode, .sapFCard").filter(":visible").eq(0);if(p.length){C.setTileFocus(p);}}});if(d.isInEditTitle){G.setEditMode(true);}},0);if(d.groupId||d.groupChanged){t._addBottomSpace();}u.handleTilesVisibility();return false;}});}},_handleDrop:function(e,b){var l=sap.ushell.Layout.getLayoutEngine(),t=l.layoutEndCallback(),i=!t.dstArea,o=sap.ui.getCore().getEventBus(),n,c,T,d=q.Deferred(),v=this.getView(),m=v.getModel(),f=m.getProperty("/homePageGroupDisplay")&&m.getProperty("/homePageGroupDisplay")==="tabs",g=m.getProperty("/tileActionModeActive"),I=true,h=!!(m.getProperty("/personalization")&&(a.browser.msie||a.browser.edge)&&a.browser.version>=11&&(a.system.combi||a.system.tablet)),p=sap.ushell.Container.getService("LaunchPage"),j=t.tile.getBindingContext().getObject().object,k=p.isLinkPersonalizationSupported(j);sap.ushell.Layout.getLayoutEngine()._toggleAnchorItemHighlighting(false);if(t.dstGroup){var r=t.dstGroup.getBindingContext(),s=r.getProperty(r.sPath).isGroupLocked;I=i&&s;}if(!t.tileMovedFlag||(h&&l.isTabBarCollision())||I||(!k&&t.dstArea==="links")){o.publish("launchpad","sortableStop");return null;}if(!g&&!f&&t.dstArea==="links"&&!t.dstGroupData.getLinks().length){o.publish("launchpad","sortableStop");return null;}n=true;c=true;if((t.srcGroup!==t.dstGroup)){n=c=false;}else if(t.tile!==t.dstGroup.getTiles()[t.dstTileIndex]){c=false;}T=this._getTileUuid(t.tile);if(t.srcGroup&&t.srcGroup.removeAggregation&&t.srcArea){t.srcGroup.removeAggregation("tiles",t.tile,n);}var S=t.dstGroupData&&t.dstGroupData.insertAggregation&&t.dstArea===t.srcArea;if(S){t.tile.sParentAggregationName=t.dstArea;t.dstGroupData.insertAggregation(t.dstArea,t.tile,t.dstTileIndex,c);this._showDropToastMessage(t);d=this._handleSameTypeDrop(t,T,S);}else{this._showDropToastMessage(t);if(i){d=this._handleShortDrop(t,T,S);}else{d=this._handleConvertDrop(t,S,b);}}if(this.getView().getModel()){this.getView().getModel().setProperty("/draggedTileLinkPersonalizationSupported",true);}o.publish("launchpad","sortableStop");return d.promise();},_showDropToastMessage:function(t){var T=this._getTileTitle(t),d=t.dstGroup.getHeaderText?t.dstGroup.getHeaderText():t.dstGroup.getTitle(),s=sap.ushell.resources.i18n.getText("added_tile_to_group"),b=T+" "+s+" "+d,c=t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,e=t.srcGroup.getGroupId?t.srcGroup.getGroupId():t.srcGroup.groupId;if(c!==e){sap.m.MessageToast.show(sap.ushell.resources.i18n.getText(b));}},_handleSameTypeDrop:function(t,T,s){var e=sap.ui.getCore().getEventBus(),d=q.Deferred();t.tile._getBindingContext().oModel.setProperty(t.tile._getBindingContext().sPath+"/draggedInTabBarToSourceGroup",false);e.publish("launchpad","movetile",{sTileId:T,sToItems:t.dstArea?t.dstArea:"tiles",sFromItems:t.srcArea?t.srcArea:"tiles",sTileType:t.dstArea?t.dstArea.substr(0,t.dstArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:s,callBack:function(){d.resolve();}});return d.promise();},_handleShortDrop:function(t,T,s){var e=sap.ui.getCore().getEventBus(),d=q.Deferred();e.publish("launchpad","movetile",{sTileId:T,sToItems:t.srcArea||"tiles",sFromItems:t.srcArea||"tiles",sTileType:t.srcArea?t.srcArea.substr(0,t.srcArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:s,callBack:function(){d.resolve();}});return d.promise();},_handleConvertDrop:function(t,s,b){var e=sap.ui.getCore().getEventBus(),d=q.Deferred();e.publish("launchpad","convertTile",{toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,tile:sap.ui.getCore().byId(b.id),srcGroupId:t.srcGroup.getGroupId?t.srcGroup.getGroupId():t.srcGroup.groupId,longDrop:s,callBack:function(){d.resolve();}});return d.promise();},_getTileTitle:function(t){var m=this.getView().getModel(),b=t.tile.getBindingContext().getPath(),T=m.getProperty(b).object,s=sap.ushell.Container.getService("LaunchPage").getTileTitle(T);return s;},_getTileUuid:function(t){var T=t.getMode?t.getMode():"ContentMode",s;if(T==="LineMode"){s=t.getUuid?t.getUuid():t.getBindingContext().getObject().uuid;}else{s=t.getUuid?t.getUuid():t.getBindingContext().getObject().getParent().getUuid();}return s;},_handleDrag:function(e,b){var t=sap.ushell.Layout.getLayoutEngine().layoutEndCallback(),p=sap.ushell.Container.getService("LaunchPage"),T=t.tile.getBindingContext().getObject().object,i=p.isLinkPersonalizationSupported(T),v=this.getView(),m=v.getModel();if(m){m.setProperty("/draggedTileLinkPersonalizationSupported",i);}},_handleTabBarItemPressEventHandler:function(c,e,d){var v=this.getView(),m=v.getModel(),g=m.getProperty("/groups"),G=d.iGroupIndex;for(var i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}m.setProperty("/groups/"+G+"/isGroupSelected",true);this._handleTabBarItemPress(c,e,G);},_handleTabBarItemPress:function(c,e,g,o){var v=this.getView(),s,f;if(o){s=o.getParameter("group").getIndex();}else{s=g;}sap.ui.getCore().getEventBus().publish("launchpad","tabSelected",{iSelectedGroup:s});f=this._getVisibleGroupIndex(s);v.oDashboardGroupsBox.removeLinksFromUnselectedGroups();v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);v.oAnchorNavigationBar.setSelectedItemIndex(f);v.oAnchorNavigationBar.reArrangeNavigationBarElements();setTimeout(function(){u.handleTilesVisibility();},0);},_getVisibleGroupIndex:function(s){var g=this.getView().getModel().getProperty("/groups");var h=0;for(var i=0;i<s;i++){if(!g[i].isGroupVisible||!g[i].visibilityModes[0]){h++;}}return s-h;},_getModelGroupFromVisibleIndex:function(s){var g=this.getView().getModel().getProperty("/groups"),v=0;for(var i=0;i<g.length;i++){if(g[i].isGroupVisible&&g[i].visibilityModes[0]){v++;if(v>s){return i;}}}return 0;},_handleAnchorItemPress:function(e){var v=this.getView(),m=v.getModel(),g=m.getProperty("/groups");if(a.system.phone&&e.getParameter("manualPress")){e.oSource.openOverflowPopup();}for(var i=0;i<g.length;i++){if(m.getProperty("/groups/"+i+"/isGroupSelected")===true){m.setProperty("/groups/"+i+"/isGroupSelected",false);}}m.setProperty("/groups/"+e.getParameter("group").getIndex()+"/isGroupSelected",true);m.setProperty("/iSelectedGroup",e.getParameter("group").getIndex());if(m.getProperty("/homePageGroupDisplay")&&m.getProperty("/homePageGroupDisplay")==="tabs"&&!m.getProperty("/tileActionModeActive")){this._handleTabBarItemPress(undefined,undefined,undefined,e);}else{if(!m.getProperty("/tileActionModeActive")){v.oDashboardGroupsBox.getBinding("groups").filter([new sap.ui.model.Filter("isGroupVisible",sap.ui.model.FilterOperator.EQ,true)]);}else{v.oDashboardGroupsBox.getBinding("groups").filter([]);}this._scrollToGroup("launchpad","scrollToGroup",{group:e.getParameter("group"),groupChanged:true,focus:(e.getParameter("action")==="sapenter")});}},_addGroupHandler:function(d){var i,p=d.getSource().getBindingContext().getPath(),b=p.split("/");i=window.parseInt(b[b.length-1],10);if(d.getSource().sParentAggregationName==="afterContent"){i=i+1;}sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:"",location:i,isRendered:true});},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout(q.proxy(b.publish,b,c,e,d),1);},_changeGroupVisibility:function(g){var b=g.getPath(),m=g.getModel(),G=m.getProperty(b+"/isGroupVisible"),v=this.getView();if(m.getProperty(b+"/isDefaultGroup")||m.getProperty(b+"/isGroupLocked")){return;}m.setProperty(b+"/isGroupVisible",!G);v.oAnchorNavigationBar.updateVisibility();},_handleGroupVisibilityChanges:function(c,e,o){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),b=u.getCurrentHiddenGroupIds(m),s=b.length===o.length,i=s,p;b.some(function(h,I){if(!i){return true;}i=q.inArray(h,o)!==-1;return!i;});if(!i){p=l.hideGroups(b);p.done(function(){m.updateBindings("groups");});p.fail(function(){var d=sap.ushell.Container.getService("Message");d.error(sap.ushell.resources.i18n.getText("hideGroups_error"));});}},_updateShellHeader:function(){if(!this.oShellUIService){this._initializeShellUIService();}else{this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();}},_initializeShellUIService:function(){return sap.ui.require(["sap/ushell/ui5service/ShellUIService"],function(S){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();return this.oShellUIService;}.bind(this));},_deactivateActionModeInTabsState:function(){var v=this.getView(),m=v.getModel(),i;var g=m.getProperty("/groups");for(i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}var s=v.oAnchorNavigationBar.getSelectedItemIndex();var h=0;if(!this._isGroupVisible(s)){for(i=0;i<g.length;i++){if(!this._isGroupVisible(i)){h++;}else{s=i;break;}}}else{for(i=0;i<s;i++){if(!this._isGroupVisible(i)){h++;}}}var f=s-h;v.oAnchorNavigationBar.adjustItemSelection(f);v.oAnchorNavigationBar.setSelectedItemIndex(f);m.setProperty("/groups/"+s+"/isGroupSelected",true);v.oDashboardGroupsBox.removeLinksFromAllGroups();var G=m.getProperty("/homePageGroupDisplay");if(G&&G==="tabs"){v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);}},_isGroupVisible:function(g){var G=this.getView().getModel().getProperty("/groups");return(G[g].isGroupVisible&&G[g].visibilityModes[0]);}});},false);},"sap/ushell/components/homepage/DashboardContent.view.js":function(){sap.ui.define(['./DashboardGroupsBox','sap/ushell/resources','sap/ushell/ui/launchpad/AnchorItem','sap/ushell/ui/launchpad/AnchorNavigationBar','sap/ushell/EventHub','sap/ushell/utils','sap/ushell/Config','sap/ui/core/InvisibleText',"sap/m/library","sap/m/Bar","sap/m/ToolbarSpacer","sap/m/Page","sap/m/FlexBox","sap/m/Button","sap/ui/Device","jquery.sap.global","sap/ui/core/mvc/View"],function(D,r,A,a,E,u,C,I,m,B,T,P,F,b,c,q,V){"use strict";sap.ui.jsview("sap.ushell.components.homepage.DashboardContent",{createContent:function(o){var d,v=sap.ui.getCore().byId("viewPortContainer"),e,h=sap.ushell.components.getHomepageManager?sap.ushell.components.getHomepageManager():undefined;this.isTouch=c.system.combi?false:(c.system.phone||c.system.tablet);this.isCombi=c.system.combi;this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.oModel=this.getModel();this.addStyleClass("sapUshellDashboardView");this.ieHtml5DnD=this.oModel.getProperty("/personalization")&&h&&h.isIeHtml5DnD();this.isContentWasRendered=false;sap.ui.getCore().getEventBus().subscribe("launchpad","initialConfigurationSet",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().subscribe("launchpad",'actionModeInactive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad",'actionModeActive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.Notifications","enablePreviewNotificationChanged",this._enablePreviewNotificationChanged,this);sap.ui.getCore().getEventBus().subscribe("shell","notificationsPreviewContainerCreated",this._notificationsPreviewContainerCreated,this);sap.ui.getCore().getEventBus().subscribe("shell","setPlaceForNotificationsPreview",this._setPlaceForNotificationsPreview,this);this.aDoableObjects=[E.on("CenterViewPointContentRendered").do(this._handleContentRendered.bind(this)),E.once("CoreResourcesComplementLoaded").do(this._enableAnchorBarOverflowAndCreateFooter.bind(this))];sap.ushell.Container.getRenderer('fiori2').getRouter().getRoute("home").attachMatched(this.onAfterNavigate,this);this.addEventDelegate({onAfterRendering:function(){function _(){var h=sap.ushell.components.getHomepageManager();if(!h.getPreparedGroupModel()){h.loadPersonalizedGroups();}else{E.once("firstSegmentCompleteLoaded").do(h.handleFirstSegmentLoaded.bind(h));}}window.setTimeout(_);this.onAfterNavigate();}.bind(this),onAfterShow:function(){this.getController()._addBottomSpace();this.getController()._updateShellHeader();this._onAfterDashboardShow();}.bind(this),onAfterHide:function(f){}});this.oAnchorNavigationBar=this._getAnchorNavigationBar(o);d=new D();this.oDashboardGroupsBox=d.createGroupsBox(o,this.oModel);e=this._previewNotificationEnabled();if(v){v.shiftCenterTransitionEnabled(e);}this.oFilterSelectedGroup=new sap.ui.model.Filter("isGroupSelected",sap.ui.model.FilterOperator.EQ,true);this.oFooter=new B('sapUshellDashboardFooter',{visible:"{/tileActionModeActive}",contentRight:[new T()]});this.oPage=new P('sapUshellDashboardPage',{customHeader:this.oAnchorNavigationBar,landmarkInfo:{headerRole:sap.ui.core.AccessibleLandmarkRole.Navigation},floatingFooter:true,footer:this.oFooter,content:[this.oDashboardGroupsBox]});var O=this.oPage.onAfterRendering;this.oPage.onAfterRendering=function(){if(O){O.apply(this,arguments);}var f=this.getDomRef(),s=f.getElementsByTagName('section');q(s[0]).off("scrollstop",o.handleDashboardScroll);q(s[0]).on("scrollstop",o.handleDashboardScroll);};this.oNotificationsContainer=new F({displayInline:true,fitContainer:true,items:[]});this.oViewContainer=new F({fitContainer:true,alignItems:m.FlexAlignItems.Stretch,renderType:m.FlexRendertype.Bare,height:'100%',items:[this.oPage,this.oNotificationsContainer]});return this.oViewContainer;},_notificationsPreviewContainerCreated:function(s,e,d){this.oNotificationsContainer.addItem(d.previewNotificationsContainerPlaceholder);this.oNotificationsContainer.addItem(d.previewNotificationsContainer);},_setPlaceForNotificationsPreview:function(s,e,d){this.oDashboardGroupsBox.toggleStyleClass('sapUshellDashboardGroupsContainerSqueezed',d.EnableNotificationsPreview);this.oAnchorNavigationBar.toggleStyleClass('sapUshellAnchorNavigationBarSqueezed',d.EnableNotificationsPreview);},_getAnchorItemTemplate:function(){var t=this,h=C.last("/core/extension/enableHelp");var o=new A({index:"{index}",title:"{title}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",writeHelpId:h,selected:false,isGroupRendered:"{isRendered}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(d,i,v){if(!v[d?1:0]){return false;}return i||d;}},locked:"{isGroupLocked}",isGroupDisabled:{parts:['isGroupLocked','/isInDrag','/homePageGroupDisplay'],formatter:function(i,d,s){return i&&d&&s==='tabs';}},press:function(e){t.oAnchorNavigationBar.handleAnchorItemPress(e);}});o.attachBrowserEvent("focus",function(){this.setNavigationBarItemsVisibility();}.bind(this.oAnchorNavigationBar));return o;},_getAnchorNavigationBar:function(o){var d=new a("anchorNavigationBar",{selectedItemIndex:"{/topGroupInViewPortIndex}",itemPress:[function(e){this._handleAnchorItemPress(e);},o],overflowEnabled:false});d=this._extendAnchorNavigationBar(d);d.addStyleClass("sapContrastPlus");return d;},_extendAnchorNavigationBar:function(o){var e=q.extend(o,{onsapskipforward:function(d){d.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.goToTileContainer(d,this.bGroupWasPressed);this.bGroupWasPressed=false;},onsapskipback:function(d){d.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(d);},onsapenter:function(d){d.srcControl.getDomRef().click();},onsapspace:function(d){d.srcControl.getDomRef().click();}});return e;},_addActionModeButtonsToDashboard:function(){if(sap.ushell.components.homepage.ActionMode){sap.ushell.components.homepage.ActionMode.init(this.getModel());}},_createActionModeMenuButton:function(){var t=this,o={},d={id:"ActionModeBtn",text:r.i18n.getText("activateEditMode"),icon:'sap-icon://edit',press:function(){this.oDashboardGroupsBox.getBinding("groups").filter([]);var e=this.oDashboardGroupsBox.getGroups();sap.ushell.components.homepage.ActionMode.toggleActionMode(this.oModel,"Menu Item",e);this.oAnchorNavigationBar.updateVisibility();var v=sap.ui.getCore().byId('viewPortContainer');if(v.getCurrentState()!=="Center"){sap.ui.getCore().byId("viewPortContainer").switchState("Center");}if(this.oModel.getProperty("/homePageGroupDisplay")!=="scroll"){if(this.oModel.getProperty("/tileActionModeActive")){if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){this.oDashboardGroupsBox.getBinding("groups").filter([]);var g=this.oModel.getProperty("/groups"),s;for(var i=0;i<g.length;i++){if(g[i].isGroupSelected){s=i;break;}}this.getController()._scrollToGroup("launchpad","scrollToGroup",{group:{getGroupId:function(){return g[s].groupId;}},groupChanged:false,focus:true});}else{this.oDashboardGroupsBox.getBinding("groups").filter([]);}}else{this.getController()._deactivateActionModeInTabsState();}}}.bind(this)};this.oTileActionsButton=sap.ui.getCore().byId(d.id);if(this.oTileActionsButton&&this.oTileActionsButton.data("isShellHeader")){q.sap.measure.start("FLP:DashboardContent,view._createActionModeMenuButton","attach press and text to edit home page button","FLP");this.oTileActionsButton.setTooltip(d.text);this.oTileActionsButton.setText(d.text);if(!this.bTileActionsButtonPressAttached){this.oTileActionsButton.attachPress(d.press);this.bTileActionsButtonPressAttached=true;}q.sap.measure.end("FLP:DashboardContent,view._createActionModeMenuButton");}else{o.controlType="sap.ushell.ui.launchpad.ActionItem";o.oControlProperties=d;o.bIsVisible=true;o.bCurrentState=true;sap.ushell.Container.getRenderer("fiori2").addUserAction(o).done(function(e){t.oTileActionsButton=e;if(C.last("/core/extension/enableHelp")){t.oTileActionsButton.addStyleClass('help-id-ActionModeBtn');}});}},_handleEditModeChange:function(){if(this.oTileActionsButton){this.oTileActionsButton.toggleStyleClass('sapUshellAcionItemActive');}},_enablePreviewNotificationChanged:function(s,e,d){this.oModel.setProperty("/userEnableNotificationsPreview",d.bPreviewEnabled);},_enableAnchorBarOverflowAndCreateFooter:function(){if(this.oDoneBtn){return;}this.oAnchorNavigationBar.setOverflowEnabled(true);if(!this.oButtonLabelledBy){this.oButtonLabelledBy=new I({text:r.i18n.getText("closeEditMode")});this.oButtonLabelledBy.toStatic();}this.oDoneBtn=new b('sapUshellDashboardFooterDoneBtn',{type:m.ButtonType.Emphasized,text:r.i18n.getText("closeEditMode"),ariaLabelledBy:this.oButtonLabelledBy.getId(),press:function(){q("#sapUshellDashboardPage .sapUshellAnchorNavigationBarSqueezed").toggleClass("sapUshellAnchorBarEditMode");var d=this.oDashboardGroupsBox.getGroups();sap.ushell.components.homepage.ActionMode.toggleActionMode(this.oModel,"Menu Item",d);this.oAnchorNavigationBar.updateVisibility();if(this.oModel.getProperty("/homePageGroupDisplay")&&this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){this.getController()._deactivateActionModeInTabsState();}}.bind(this)});this.oDoneBtn.addEventDelegate({onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.goToFirstVisibleTileContainer();},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.homepage.ComponentKeysHandler.goToFirstVisibleTileContainer();},onsaptabnext:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});this.oFooter.addContentRight(this.oDoneBtn);},_previewNotificationEnabled:function(){var d=this.oModel.getProperty("/configEnableNotificationsPreview"),U=this.oModel.getProperty("/userEnableNotificationsPreview");return(d&&U);},_createActionButtons:function(){var e=this.oModel.getProperty("/personalization");if(e){if(this.oModel.getProperty("/enableActionModeMenuButton")){this._createActionModeMenuButton();}}},onAfterNavigate:function(e){var R=sap.ushell.Container.getRenderer&&sap.ushell.Container.getRenderer("fiori2"),i=R&&R.getCurrentCoreView()==="home",d=sap.ui.getCore().byId("ActionModeBtn");if(d&&d.data&&d.data("isShellHeader")){d.setVisible(true);}if(R&&R.toggleOverFlowActions){R.toggleOverFlowActions();}if(i&&R){u.refreshTiles();R.createExtendedShellState("dashboardExtendedShellState",function(){this._createActionButtons();if(!c.system.phone){R.showRightFloatingContainer(false);}}.bind(this));this.getController()._setCenterViewPortShift();this._addActionModeButtonsToDashboard();setTimeout(function(){if(sap.ushell.Container&&R){R.applyExtendedShellState("dashboardExtendedShellState");}},0);if(document.activeElement&&document.activeElement.tagName==="BODY"){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell();}}},_handleContentRendered:function(e){if(!this.isContentWasRendered&&e.groups>-1){this.isContentWasRendered=true;this._onAfterDashboardShow(e);}else{this._onAfterDashboardShow(e);}},_focusOnDomElement:function(d){if(d){setTimeout(function(){d.focus();},0);}},_onAfterDashboardShow:function(e){if(!this.isContentWasRendered){this._focusOnDomElement(q("#configBtn"));return;}var j=q(".sapUshellTileContainer").filter(":visible"),v=sap.ui.getCore().byId('viewPortContainer'),i=sap.ushell.Container.getRenderer("fiori2").getCurrentCoreView()==="home",t=this.oModel.getProperty('/tileActionModeActive'),p;if(i){if(!t){u.handleTilesVisibility();var d=this.oModel.getProperty('/topGroupInViewPortIndex'),f=q(j[d]),g=j.find("li[class*='sapUshellTile']li[tabindex=0]"),h=f.find(".sapUshellTile").eq(0),k;if(g.length){k=g;}else if(h.length){k=h;}else{k=q("#configBtn");}p=this.oModel.getProperty('/enableNotificationsPreview');if(v){v.shiftCenterTransition(p);}this._focusOnDomElement(k);}this.onAfterNavigate();}},getControllerName:function(){return"sap.ushell.components.homepage.DashboardContent";},_isInDeashboard:function(){var n=sap.ui.getCore().byId("viewPortContainer"),o=sap.ui.getCore().byId("dashboardGroups");return((n.getCurrentCenterPage()==="application-Shell-home")&&(o.getModel().getProperty("/currentViewName")==="home"));},exit:function(){if(this.oAnchorNavigationBar){this.oAnchorNavigationBar.handleExit();this.oAnchorNavigationBar.destroy();}if(this.oTileActionsButton){this.oTileActionsButton.destroy();}V.prototype.exit.apply(this,arguments);if(this.aDoableObjects){this.aDoableObjects.forEach(function(d){d.off();});}sap.ui.getCore().getEventBus().unsubscribe("launchpad","initialConfigurationSet",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad",'actionModeInactive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad",'actionModeActive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("shell","notificationsPreviewContainerCreated",this._notificationsPreviewContainerCreated,this);sap.ui.getCore().getEventBus().unsubscribe("shell","setPlaceForNotificationsPreview",this._setPlaceForNotificationsPreview,this);}});},false);},"sap/ushell/components/homepage/DashboardGroupsBox.js":function(){sap.ui.define(["sap/ushell/Layout","sap/ui/base/Object","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ushell/ui/launchpad/Tile","sap/ushell/ui/launchpad/DashboardGroupsContainer","sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component","sap/m/GenericTile","sap/base/Log","sap/ui/Device","sap/ui/integration/widgets/Card"],function(L,b,F,a,c,D,E,C,d,G,e,f,g){"use strict";var h=b.extend("sap.ushell.components.homepage.DashboardGroupsBox",{metadata:{publicMethods:["createGroupsBox"]},constructor:function(i,s){if(sap.ushell.components.homepage.getDashboardGroupsBox&&sap.ushell.components.homepage.getDashboardGroupsBox()){return sap.ushell.components.homepage.getDashboardGroupsBox();}sap.ushell.components.homepage.getDashboardGroupsBox=jQuery.sap.getter(this.getInterface());this.oController=undefined;this.oGroupsContainer=undefined;this.isLinkPersonalizationSupported=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported();sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);},destroy:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);sap.ushell.components.homepage.getDashboardGroupsBox=undefined;},calculateFilter:function(){var i=[];var o;var s=this.oModel.getProperty("/homePageGroupDisplay"),j=this.oModel.getProperty("/tileActionModeActive");if(!j){if(s&&s==="tabs"){o=new F("isGroupSelected",a.EQ,true);}else{o=new F("isGroupVisible",a.EQ,true);}i.push(o);}return i;},createGroupsBox:function(o,m){this.oController=o;var t=this,A,i,j=function(l){var n,p;if(l&&(n=l.getDomRef())){p=n.querySelector(".sapUshellPlusTile");if(p){return p;}}return null;},r=function(l){var p=j(l.currentGroup),n=j(l.endGroup),q=(l.tiles[l.tiles.length-2]===l.item)||(l.endGroup.getTiles().length===0);if(q){t._hidePlusTile(n);}else{t._showPlusTile(n);}if(l.currentGroup!==l.endGroup){t._showPlusTile(p);}};A=function(){L.getLayoutEngine().setExcludedControl(sap.ushell.ui.launchpad.PlusTile);L.getLayoutEngine().setReorderTilesCallback.call(L.layoutEngine,r);};i=function(){if(!L.isInited){L.init({getGroups:this.getGroups.bind(this),getAllGroups:t.getAllGroupsFromModel.bind(t),isTabBarActive:t.isTabBarActive.bind(t),animationsEnabled:(t.oModel.getProperty("/animationMode")==="full")}).done(A);f.media.attachHandler(function(){if(!this.bIsDestroyed){L.reRenderGroupsLayout(null);}},this,f.media.RANGESETS.SAP_STANDARD);var l=this.getDomRef();o.getView().sDashboardGroupsWrapperId=!jQuery.isEmptyObject(l)&&l.parentNode?l.parentNode.id:"";}L.reRenderGroupsLayout(null);if(this.getGroups().length){if(o.bModelInitialized){o._initializeUIActions();}o._addBottomSpace();if(this.getModel().getProperty("/enableTilesOpacity")){sap.ushell.utils.handleTilesOpacity(this.getModel());}}E.emit("CenterViewPointContentRendered",{"groups":this.getGroups().length});sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");this.getBinding("groups").filter(t.calculateFilter());};this.isTabBarActive=function(){return this.oModel.getProperty("/homePageGroupDisplay")==="tabs";};this.oModel=m;var k=this.calculateFilter(),u=C.last("/core/home/gridContainer");this.oGroupsContainer=new D("dashboardGroups",{accessibilityLabel:sap.ushell.resources.i18n.getText("DashboardGroups_label"),displayMode:"{/homePageGroupDisplay}",afterRendering:i});if(u){sap.ui.require(["sap/ushell/ui/launchpad/GridContainer"],function(l){t.oGroupsContainer.bindAggregation("groups",{filters:k,path:"/groups",factory:function(){return t._createGridContainer(o,m);}});});}else{this.oGroupsContainer.bindAggregation("groups",{filters:k,path:"/groups",factory:function(){return t._createTileContainer(o,m);}});}this.oGroupsContainer.addEventDelegate({onsapskipback:function(l){l.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);if(jQuery(".sapUshellAnchorItem").is(":visible")){sap.ushell.components.homepage.ComponentKeysHandler.goToSelectedAnchorNavigationItem();}else{sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(l);}},onsapskipforward:function(l){l.preventDefault();var n=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(n){n.focus();}else if(jQuery("#sapUshellFloatingContainerWrapper").is(":visible")&&l.originalEvent.srcElement.id!==""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(l);}},onsaptabnext:function(l){if(t.oModel.getProperty("/tileActionModeActive")){if(jQuery(document.activeElement).closest(".sapUshellTileContainerHeader").length){var n=jQuery(document.activeElement).closest(".sapUshellTileContainer");var p=jQuery(document.activeElement).hasClass("sapUshellContainerTitle");var q=n.find(".sapUshellHeaderActionButton");if(p&&!q.length||document.activeElement.id===q.last()[0].id){if(n.find(".sapUshellTile, .sapUshellLink, .sapFCard").is(":visible")){l.preventDefault();sap.ushell.components.homepage.ComponentKeysHandler.goToLastVisitedTile(n,true);return;}}if(q.length&&document.activeElement.id!==q.last()[0].id){return;}}var s=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(s){l.preventDefault();s.focus();return;}}l.preventDefault();if(jQuery("#sapUshellFloatingContainerWrapper").is(":visible")&&(l.originalEvent.srcElement.id)!==""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(l);}},onsaptabprevious:function(l){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var n=jQuery(":focus");if(t.oModel.getProperty("/tileActionModeActive")&&!n.hasClass("sapUshellTileContainerHeader")){var p=jQuery(document.activeElement);if(p.hasClass("sapUshellTile")){l.preventDefault();var q=p.closest(".sapUshellTileContainer");var s=q.find(".sapUshellHeaderActionButton").filter(":visible").last();if(s.length>0){s.focus();}else{q.find(".sapUshellContainerTitle").focus();}}}}});return this.oGroupsContainer;},getAllGroupsFromModel:function(){return this.oModel.getProperty("/groups");},_createTileContainer:function(o,m){var t=this,i=new F("isTileIntentSupported",a.EQ,true),T=new sap.ushell.ui.launchpad.TileContainer({headerText:"{title}",showEmptyLinksArea:{parts:["/tileActionModeActive","links/length","isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(j,n,k,I,A){if(n){return true;}else if(k){return false;}return j||I&&A==="tabs";}},showMobileActions:{parts:["/tileActionModeActive"],formatter:function(I){return I&&!this.getDefaultGroup();}},showIcon:{parts:["/isInDrag","/tileActionModeActive"],formatter:function(I,j){return(this.getIsGroupLocked()&&(I||j));}},deluminate:{parts:["/isInDrag"],formatter:function(I){return this.getIsGroupLocked()&&I;}},transformationError:{parts:["/isInDrag","/draggedTileLinkPersonalizationSupported"],formatter:function(I,j){return I&&!j;}},showBackground:"{/tileActionModeActive}",tooltip:"{title}",tileActionModeActive:"{/tileActionModeActive}",ieHtml5DnD:o.getView().ieHtml5DnD,enableHelp:"{/enableHelp}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",showHeader:true,showGroupHeader:"{showGroupHeader}",homePageGroupDisplay:"{/homePageGroupDisplay}",editMode:"{editMode}",supportLinkPersonalization:this.isLinkPersonalizationSupported,titleChange:function(j){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:j.getSource().getGroupId(),newTitle:j.getParameter("newTitle")});},showEmptyLinksAreaPlaceHolder:{parts:["links/length","/isInDrag","/homePageGroupDisplay"],formatter:function(n,I,A){return I&&A==="tabs"&&!n;}},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(j){return j&&!this.getIsGroupLocked();}},visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(j,k,v){if(!v[j?1:0]){return false;}return k||j;}},hidden:{parts:["/tileActionModeActive","isGroupVisible"],formatter:function(I,j){return I&&!j;}},links:this._getLinkTemplate(),tiles:{path:"tiles",factory:this._itemFactory.bind(this),filters:[i]},add:function(j){if(document.toDetail){document.toDetail();}d.getOwnerComponentFor(t.oController.getView().parentComponent).getRouter().navTo("appfinder",{"innerHash*":"catalog/"+JSON.stringify({targetGroup:encodeURIComponent(j.getSource().getBindingContext().sPath)})});}});return T;},_createGridContainer:function(o,m){var i=sap.ui.require("sap/ushell/ui/launchpad/GridContainer"),j=new F("isTileIntentSupported",a.EQ,true);return new i({groupId:"{groupId}",showHeader:true,defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",headerText:"{title}",showGroupHeader:"{showGroupHeader}",homePageGroupDisplay:"{/homePageGroupDisplay}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(t,k,v){if(!v[t?1:0]){return false;}return k||t;}},isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",editMode:"{editMode}",showBackground:"{/tileActionModeActive}",showIcon:{parts:["/isInDrag","/tileActionModeActive"],formatter:function(I,k){return(this.getIsGroupLocked()&&(I||k));}},tileActionModeActive:"{/tileActionModeActive}",supportLinkPersonalization:this.isLinkPersonalizationSupported,ieHtml5DnD:o.getView().ieHtml5DnD,enableHelp:"{/enableHelp}",showEmptyLinksAreaPlaceHolder:{parts:["links/length","/isInDrag","/homePageGroupDisplay"],formatter:function(n,I,A){return I&&A==="tabs"&&!n;}},showEmptyLinksArea:{parts:["/tileActionModeActive","links/length","isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(t,n,k,I,A){if(n){return true;}else if(k){return false;}return t||I&&A==="tabs";}},titleChange:function(k){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:k.getSource().getGroupId(),newTitle:k.getParameter("newTitle")});},tooltip:"{title}",links:this._getLinkTemplate(),tiles:{path:"tiles",factory:this._itemFactory.bind(this),filters:[j]}});},_getLinkTemplate:function(){var o=new F("isTileIntentSupported",a.EQ,true);if(!this.isLinkPersonalizationSupported){return{path:"links",templateShareable:true,template:new sap.ushell.ui.launchpad.LinkTileWrapper({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,tileViews:{path:"content",factory:function(i,j){return j.getObject();}},afterRendering:function(i){var j=jQuery(this.getDomRef().getElementsByTagName("a"));j.attr("tabindex",-1);}}),filters:[o]};}return{path:"links",factory:function(i,j){var k=j.getObject().content[0];if(k&&k.bIsDestroyed){k=k.clone();j.getModel().setProperty(j.getPath()+"/content/0",k);}return k;},filters:[o]};},_itemFactory:function(i,o){var t=o.getProperty(o.sPath),j,k,l,m;if(t){if(t.isCard){j=t&&t.content;k=j&&j.length&&j[0];if(k&&k["sap.card"]){m=k;}else if(t.manifest){m={"sap.flp":t.manifest&&t.manifest["sap.flp"],"sap.card":{"type":"List"}};}else{return this._createErrorTile();}l=new g({manifest:m});}else{l=this._createTile();}t.controlId=l&&l.getId&&l.getId();}return l;},_createErrorTile:function(){return new c({tileViews:{path:"content",factory:function(){return new G({state:"Failed"});}}});},_createTile:function(){var t=new c({"long":"{long}",isDraggedInTabBarToSourceGroup:"{draggedInTabBarToSourceGroup}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",isCustomTile:"{isCustomTile}",target:"{target}",isLocked:"{isLocked}",navigationMode:"{navigationMode}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,tileViews:{path:"content",factory:function(i,o){return o.getObject();}},coverDivPress:function(o){if(!o.oSource.getBindingContext().getObject().tileIsBeingMoved){sap.ushell.components.homepage.ActionMode._openActionsMenu(o);}},showActions:function(o){sap.ushell.components.homepage.ActionMode._openActionsMenu(o);},deletePress:function(o){var T=o.getSource(),t=T.getBindingContext().getObject().object,i={originalTileId:sap.ushell.Container.getService("LaunchPage").getTileId(t)};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",i,this);},press:[this.oController.dashboardTilePress,this.oController]});var v=sap.ui.getCore().byId("viewPortContainer");t.addEventDelegate({onclick:function(o){jQuery.sap.measure.start("FLP:DashboardGroupsBox.onclick","Click on tile","FLP");jQuery.sap.measure.start("FLP:OpenApplicationonClick","Open Application","FLP");function i(){jQuery.sap.measure.end("FLP:DashboardGroupsBox.onclick");v.detachAfterNavigate(i);}v.attachAfterNavigate(i);}});return t;},_updateGroupHeaderVisibility:function(A,B,o){this._updateFirstGroupHeaderVisibility(o.group.getModel().getProperty("/tileActionModeActive"),this.oModel.getProperty("/homePageGroupDisplay")!=="tabs");},_updateFirstGroupHeaderVisibility:function(I,j){var k=this.oGroupsContainer.getGroups(),l=undefined,v=0;for(var i=0;i<k.length;i++){if(k[i].getProperty("visible")){v++;if(l===undefined){l=i;}else{k[i].setShowGroupHeader(I||j);}}}if(l!==undefined){var s=this.oModel.getProperty("/homePageGroupDisplay"),V=I||(v==1&&j),m=k.length>1||s==="tabs";k[l].setShowGroupHeader(V,m);}},_handleActionModeChange:function(){var A=this.oModel.getProperty("/tileActionModeActive");if(A){this._addTileContainersContent();}else{L.reRenderGroupsLayout(null);}},_addTileContainersContent:function(){var j=this.oGroupsContainer.getGroups();for(var i=0;i<j.length;i++){var o=j[i];if(!o.getBeforeContent().length){o.addBeforeContent(this._getBeforeContent());}if(!o.getAfterContent().length){o.addAfterContent(this._getAfterContent());}if(!o.getHeaderActions().length){o.addHeaderAction(this._getGroupHeaderAction());}}},_handleAddGroupButtonPress:function(o){this.oController._addGroupHandler(o);this._addTileContainersContent();},_getBeforeContent:function(){var A=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:"{= !${isGroupLocked} && !${isDefaultGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]});A.addStyleClass("sapUshellAddGroupButton");A.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));return A;},_getAfterContent:function(){var A=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:"{= ${isLastGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]}).addStyleClass("sapUshellAddGroupButton");A.addStyleClass("sapUshellAddGroupButton");A.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));return A;},_getGroupHeaderAction:function(){return new sap.ushell.ui.launchpad.GroupHeaderActions({content:this._getHeaderActions(),tileActionModeActive:"{/tileActionModeActive}",isOverflow:"{/isPhoneWidth}"}).addStyleClass("sapUshellOverlayGroupActionPanel");},_getHeaderActions:function(){var H=[];if(C.last("/core/home/gridContainer")){var A=new sap.m.Button({text:sap.ushell.resources.i18n.getText("AddTileBtn"),visible:"{= !${isGroupLocked}}",enabled:"{= !${/editTitle}}",press:this._handleAddTileToGroup.bind(this)}).addStyleClass("sapUshellHeaderActionButton");if(f.system.phone){A.setIcon("sap-icon://add");}H.push(A);}H.push(new sap.m.Button({text:{path:"isGroupVisible",formatter:function(i){return sap.ushell.resources.i18n.getText(i?"HideGroupBtn":"ShowGroupBtn");}},icon:{path:"isGroupVisible",formatter:function(i){if(f.system.phone){return i?"sap-icon://hide":"sap-icon://show";}return"";}},visible:"{= ${/enableHideGroups} && !${isGroupLocked} && !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(o){var s=o.getSource(),i=s.getBindingContext();this.oController._changeGroupVisibility(i);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));H.push(new sap.m.Button({text:{path:"removable",formatter:function(i){return sap.ushell.resources.i18n.getText(i?"DeleteGroupBtn":"ResetGroupBtn");}},icon:{path:"removable",formatter:function(i){if(f.system.phone){return i?"sap-icon://delete":"sap-icon://refresh";}return"";}},visible:"{= !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(o){var s=o.getSource(),i=s.getBindingContext();this.oController._handleGroupDeletion(i);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));return H;},_handleAddTileToGroup:function(o){if(document.toDetail){document.toDetail();}d.getOwnerComponentFor(this.oController.getView().parentComponent).getRouter().navTo("appfinder",{"innerHash*":"catalog/"+JSON.stringify({targetGroup:encodeURIComponent(o.getSource().getBindingContext().sPath)})});},_hidePlusTile:function(p){if(p){p.classList.add("sapUshellHidePlusTile");}},_showPlusTile:function(p){if(p){p.classList.remove("sapUshellHidePlusTile");}}});return h;});},"sap/ushell/components/homepage/DashboardUIActions.js":function(){sap.ui.define(["sap/ui/base/Object"],function(b){"use strict";var D=b.extend("sap.ushell.components.homepage.DashboardUIActions",{metadata:{publicMethods:["initializeUIActions"]},constructor:function(i,s){this.aTabBarItemsLocation=[];if(sap.ushell.components.homepage.getDashboardUIActions&&sap.ushell.components.homepage.getDashboardUIActions()){return sap.ushell.components.homepage.getDashboardUIActions();}sap.ushell.components.homepage.getDashboardUIActions=jQuery.sap.getter(this.getInterface());this.oTileUIActions=undefined;this.oLinkUIActions=undefined;this.oGroupUIActions=undefined;this.oController=undefined;this.UIActionsInitialized=false;sap.ui.getCore().getEventBus().subscribe('launchpad','actionModeActive',this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().subscribe('launchpad','actionModeInactive',this._disableGroupUIActions,this);},destroy:function(){sap.ui.getCore().getEventBus().unsubscribe('launchpad','actionModeActive',this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().unsubscribe('launchpad','actionModeInactive',this._disableGroupUIActions,this);sap.ushell.components.homepage.getDashboardUIActions=undefined;this.oGroupUIActions=null;this.oTileUIActions=null;this.oLinkUIActions=null;},initializeUIActions:function(c){this.oController=c;if(c.getView().getModel().getProperty("/homePageGroupDisplay")==="tabs"){this._fillTabBarItemsArray();}var i=sap.ushell.Container?sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported():null;var p=jQuery("#sapUshellDashboardPage").width();var d=c.getView().sDashboardGroupsWrapperId,a,r=sap.ui.getCore().getConfiguration().getRTL(),C={containerSelector:'#dashboardGroups',wrapperSelector:d?"#"+d:undefined,rootSelector:"#shell"},o=jQuery.extend(true,{},C,{switchModeDelay:1000,isTouch:c.getView().isTouch,isCombi:c.getView().isCombi,debug:false}),l={draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",cloneClass:"sapUshellLinkTile-clone",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:c.getView().isTouch||c.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:'sapUshellLockedTile',onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p,defaultMouseMoveHandler:function(){}},t={draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",deltaTop:-44,scrollContainerSelector:undefined,startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:c.getView().isTouch||c.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:'sapUshellLockedTile',onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p,defaultMouseMoveHandler:function(){}},g={draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",draggableSelectorExclude:".sapUshellHeaderActionButton",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",startCallback:this._handleGroupsUIStart.bind(this),endCallback:this._handleGroupDrop.bind(this),dragCallback:this._handleGroupStartDrag.bind(this),moveTolerance:c.getView().isTouch||c.getView().isCombi?10:0.1,isLayoutEngine:false,isVerticalDragOnly:true,draggableElement:".sapUshellTileContainerHeader"},w={type:"tiles",draggableSelector:".sapUshellTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p},W={type:"links",draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p},e={type:"groups",draggableSelector:".sapUshellTileContainerHeader",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",_publishAsync:c._publishAsync};if(c.getView().oDashboardGroupsBox.getGroups().length){if(c.getView().getModel().getProperty("/personalization")){if(!c.getView().ieHtml5DnD){sap.ui.require(['sap/ushell/UIActions'],function(U){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=new U(jQuery.extend(true,{},o,t)).enable();this.oGroupUIActions=new U(jQuery.extend(true,{},o,g));if(i){this.oLinkUIActions=new U(jQuery.extend(true,{},o,l)).enable();}a=c.getView().getModel().getProperty("/tileActionModeActive");if(a){this.oGroupUIActions.enable();}}.bind(this));}else{sap.ui.require(['sap/ushell/UIActionsWin8'],function(U){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=U.getInstance(jQuery.extend(true,{},C,w)).enable();this.oLinkUIActions=U.getInstance(jQuery.extend(true,{},C,W)).enable();this.oGroupUIActions=U.getInstance(jQuery.extend(true,{},C,e)).enable();}.bind(this));}}}},_enableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.enable();}},disableAllDashboardUiAction:function(){this._disableTileUIActions();this._disableLinkUIActions();this._disableGroupUIActions();},_disableTileUIActions:function(){if(this.oTileUIActions){this.oTileUIActions.disable();}},_disableLinkUIActions:function(){if(this.oLinkUIActions){this.oLinkUIActions.disable();}},_disableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.disable();}},_handleTileDragMove:function(c){if(!c.isScrolling){sap.ushell.Layout.getLayoutEngine().moveDraggable(c.moveX,c.moveY,this.aTabBarItemsLocation);}},_handleTileDragAndScrollContinuation:function(m){var a=jQuery("#anchorNavigationBar").offset(),A=a.top;if(m<A){sap.ushell.Layout.getLayoutEngine()._cancelLongDropTimmer();}return sap.ushell.Layout.getLayoutEngine()._isTabBarCollision(m);},_fillTabBarItemsArray:function(){var i=jQuery(".sapUshellAnchorItem"),l=i.length,a,B=10,t=0,T,c=[],I,o,d,n;for(a=0;a<l;a++){I=i[a];o=I.getBoundingClientRect();c[a]=o.width;}for(a=0;a<l;a++){d=c[a];if(d===0){continue;}n=Math.round(d/B);for(T=t;T<t+n;T++){this.aTabBarItemsLocation[T]=a;}t=T;}},_handleTileUIStart:function(e,u){if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement=u.querySelector("[title]");if(this.titleElement){this.titleElement.setAttribute("data-title",this.titleElement.getAttribute("title"));this.titleElement.removeAttribute("title");}}},_changeTileDragAndDropAnimate:function(e,u){var d=this.dragNDropData.jqDashboard.scrollTop(),j,t,c,a,f,T,i,C;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){j=this.dragNDropData.jqDraggableElements.eq(i);t=j[0];c=j.position();a=j.offset();if((a.left===t.offset.left)&&(a.top===t.offset.top)){continue;}t.position=c;t.offset=a;C=j.data("clone");if(!C){continue;}f=t.position.left+this.dragNDropData.containerLeftMargin;T=this._getTileTopOffset(j,t.position,d);C.stop(true,false).animate({left:f,top:T},{duration:250},{easing:"swing"});}},_preventTextSelection:function(){if(window.getSelection){var s=window.getSelection();try{s.removeAllRanges();}catch(e){}}},_handleStartDragTile:function(e,t){this._preventTextSelection();sap.ushell.Layout.getLayoutEngine().layoutStartCallback(t);if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.initDragMode();}jQuery(t).find("a").removeAttr('href');this.oController._handleDrag.call(this.oController,e,t);sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},_onBeforeCreateLinkClone:function(e,L){sap.ushell.Layout.getLayoutEngine().saveLinkBoundingRects(L);},_handleLinkDrop:function(e,t,a){var d=jQuery.Deferred(),p;if(sap.ushell.Layout.isTabBarActive()){sap.ushell.Layout.tabBarTileDropped();}if(sap.ushell.Layout.isAnimationsEnabled()&&a&&a.clone){jQuery(a.clone).animate({opacity:0},100,function(){});}if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}if(sap.ui.Device.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}if(sap.ushell.Layout.getLayoutEngine().isLinkIntersected()||sap.ushell.Layout.getLayoutEngine().isOriginalAreaChanged()){p=this.oController._handleDrop.call(this.oController,e,t);}if(p){p.then(function(){jQuery('#dashboardGroups .sapUshellHidePlusTile').removeClass('sapUshellHidePlusTile');setTimeout(function(){d.resolve();}.bind(this),300);});}else{setTimeout(function(){d.resolve();}.bind(this),0);}return d.promise();},_handleTileDrop:function(e,t,a){if(sap.ushell.Layout.getLayoutEngine().isOriginalAreaChanged()){return this._handleTileToLinkDrop(e,t,a);}else{return this._handleTileToTileDrop(e,t,a);}},_handleTileToLinkDrop:function(e,t,a){return this._handleLinkDrop(e,t,a);},_handleTileToTileDrop:function(e,t,a){var j,h,T,c=function(e,t){if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.endDragMode();}jQuery('#dashboardGroups .sapUshellHidePlusTile').removeClass('sapUshellHidePlusTile');if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}this.oController._handleDrop.call(this.oController,e,t);if(sap.ui.Device.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}};h=jQuery(".sapUshellTabBarHoverOn");h.removeClass("sapUshellTabBarHoverOn");T=jQuery(".sapUshellTileDragOpacity");T.removeClass("sapUshellTileDragOpacity");if(sap.ushell.Layout.isTabBarActive()){sap.ushell.Layout.tabBarTileDropped();}if(sap.ushell.Layout.isTabBarActive()&&sap.ushell.Layout.isOnTabBarElement()){if(a&&a.clone){var d=jQuery.Deferred();j=jQuery(a.clone);j.css("display","none");setTimeout(function(){d.resolve();c.call(this,e,t);}.bind(this),300);return d.promise();}else{c.apply(this,arguments);}}if(sap.ushell.Layout.isAnimationsEnabled()&&a&&a.clone){var f=jQuery.Deferred();j=jQuery(a.clone);var g=a.clone.getBoundingClientRect();var p=t.getBoundingClientRect();var s=j.css("transform").split(",");var i=p.top-g.top;var k=p.left-g.left;var l=parseInt(s[4],10)+k;var m=parseInt(s[5],10)+i;j.css({"transform":"translate3d("+l+"px, "+m+"px, 0px)","transition":"transform 0.3s cubic-bezier(0.46, 0, 0.44, 1)"});setTimeout(function(){f.resolve();c.call(this,e,t);}.bind(this),300);return f.promise();}else{c.apply(this,arguments);}},_getTileTopOffset:function(t,p,d){var i=0,T=i+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=p.top;return T;},_markDisableGroups:function(){if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty('/isInDrag',true);}},_endUIHandler:function(){if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.endDragMode();}if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty('/isInDrag',false);}},_handleGroupStartDrag:function(e,u){this.oTileUIActions.disable();if(this.oLinkUIActions){this.oLinkUIActions.disable();}var g=jQuery(".sapUshellDashboardGroupsContainerItem-clone"),a=g.find(".sapUshellContainerTitle"),t=a.height(),c=a.width(),d,f,h,s,r=sap.ui.getCore().getConfiguration().getRTL();if(!sap.ui.Device.system.phone){g.find(".sapUshellTileContainerEditMode").offset({top:this.oGroupUIActions.getMove().y-t,left:r?jQuery("#sapUshellDashboardPage").width()+this.oGroupUIActions.getMove().x+c:this.oGroupUIActions.getMove().x-(c/2)});jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}else{jQuery(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer, .sapUshellLinksContainer").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}jQuery(".sapUshellTileContainerAfterContent").addClass("sapUshellTileContainerRemoveContent");jQuery(u).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");this.oController.getView().getModel().setProperty('/isInDrag',true);jQuery(u).attr('startPos',jQuery(u).index());jQuery.sap.log.info('startPos - '+jQuery(u).index());setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},0);d=jQuery("#dashboardGroups").offset().top;f=jQuery(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top;h=jQuery(".sapUshellDashboardGroupsContainerItem-clone").offset().top;s=f-d-h;jQuery('.sapUshellDashboardView section').animate({scrollTop:s},0);},_handleGroupsUIStart:function(e,u){jQuery(u).find(".sapUshellTileContainerContent").css("outline-color","transparent");},_handleGroupDrop:function(e,u){var B=sap.ui.getCore().getEventBus(),q=jQuery(u),f=jQuery(q.children()[0]).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),o={group:g,groupChanged:false,focus:false},n=q.index();q.startPos=window.parseInt(q.attr('startPos'),10);d.removeAggregation('groups',g,true);d.insertAggregation('groups',g,n,true);this._handleGroupMoved(e,{item:q});q.removeAttr('startPos');sap.ui.getCore().getEventBus().publish("launchpad","sortableStop");setTimeout(function(){jQuery(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerAfterContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer, .sapUshellLinksContainer").removeClass("sapUshellTileContainerRemoveContent");},0);window.setTimeout(jQuery.proxy(B.publish,B,"launchpad","scrollToGroup",o),1);this.oTileUIActions.enable();if(this.oLinkUIActions){this.oLinkUIActions.enable();}},_handleGroupMoved:function(e,u){var f=u.item.startPos,t=u.item.index(),m=this.oController.getView().getModel();if(t!==-1){this.oController._publishAsync("launchpad","moveGroup",{fromIndex:f,toIndex:t});setTimeout(function(){m.setProperty('/isInDrag',false);},100);}},_setController:function(c){this.oController=c;}});return D;});},"sap/ushell/components/homepage/FLPAnalytics.js":function(){sap.ui.define(function(){"use strict";var o=["deleteTile","createGroup","actionModeActive","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"],E=sap.ui.getCore().getEventBus(),t=this,l={};function s(c){var m=sap.ushell.services.AppConfiguration.getMetadata();l[c]={};l[c].startTime=new Date();l[c].title=m.title;}function a(c){var d=0;try{d=(new Date()-l[c].startTime)/1000;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Time in Application (sec)",d,[l[c].title]);}catch(e){jQuery.sap.log.warning("Duration in application "+c+" could not be calculated",null,"sap.ushell.components.homepage.FLPAnalytics");}}function h(c,d,D){var A=hasher.getHash(),f;window.swa.custom1={ref:A};switch(d){case'appOpened':s(A);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Direct Launch",[l[A].title]);E.unsubscribe("sap.ushell","appOpened",h);break;case'bookmarkTileAdded':f=window.document.title;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Save as Tile",[f,D&&D.group&&D.group.title?D.group.title:"",D&&D.group&&D.group.id?D.group.id:"",D&&D.tile&&D.tile.title?D.tile.title:f]);break;case'actionModeActive':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Enter Action Mode",[D.source]);break;case'catalogTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Catalog",[]);break;case'dashboardTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Homepage",[]);break;case'dashboardTileLinkClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Tile Group Link",[]);break;default:break;}}function b(c){var f,T,d;if(c.getParameter("from")&&c.getParameter("to")){f=c.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:f};a(f);d=c.getParameter("to");T=d.getId().replace("application-","").replace("applicationShellPage-","");s(T);window.swa.custom1={ref:T};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Fiori Navigation",[l[T].title]);}}jQuery(window).on("unload",function(c){var d=window.location.hash.substr(1);a(d);});try{sap.ui.getCore().byId('viewPortContainer').attachAfterNavigate(b,t);}catch(e){jQuery.sap.log.warning("Failure when subscribing to viewPortContainer 'AfterNavigate' event",null,"sap.ushell.components.homepage.FLPAnalytics");}E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",h,t);o.forEach(function(c,i,d){E.subscribe("launchpad",c,h,t);});E.subscribe("sap.ushell","appOpened",h,t);},false);}},"Component-preload");
