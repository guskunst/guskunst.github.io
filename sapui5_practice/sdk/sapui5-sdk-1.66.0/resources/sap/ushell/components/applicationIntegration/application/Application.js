// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/components/container/ApplicationContainer","sap/ushell/components/container/PostMessageAPI","sap/ushell/utils"],function(A,P,u){"use strict";var a;function b(){this._createWaitForRendererCreatedPromise=function(){var p,r;r=sap.ushell.Container.getRenderer();if(r){jQuery.sap.log.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[];}else{p=new Promise(function(c,d){var o;o=function(){jQuery.sap.log.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");c();sap.ushell.Container.detachRendererCreatedEvent(o);};r=sap.ushell.Container.getRenderer();if(r){jQuery.sap.log.debug("Shell controller: resolving component waitFor promise immediately (shell renderer already created");c();}else{sap.ushell.Container.attachRendererCreatedEvent(o);}});return[p];}};this.createComponent=function(r,p){return sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(r,p,this._createWaitForRendererCreatedPromise());};this.createApplicationContainer=function(s,r){a=new A("application"+s,r);return a;};this.active=function(o){if(o){if(o.active){o.active();}}};this.restore=function(o){if(o){if(o.restore){o.restore();}if(o.setInitialConfiguration){o.setInitialConfiguration();}if(o.getRouter&&o.getRouter()&&o.getRouter().initialize){o.getRouter().initialize();}a=o;}};this.store=function(o){if(o){if(o.suspend){o.suspend();}if(o.getRouter&&o.getRouter()){o.getRouter().stop();}}};this.destroy=function(o){if(o&&o.destroy){o.destroy();}};this.getActiveAppContainer=function(){return a;};}b.prototype.getResponseHandler=function(s,i){return P.getResponseHandler(s,i);};b.prototype.isActiveOnly=function(s,i){return P.isActiveOnly(s,i);};b.prototype.isAppTypeSupported=function(c,s,i){return P.isAppTypeSupported(c,s,i);};b.prototype.postMessageToIframeApp=function(c,s,i,m,w){var S=s+"."+i,M=c.createPostMessageRequest(S,m);return c.postMessageToCurrentIframe(M,w);};b.prototype.registerShellCommunicationHandler=function(c){P.registerShellCommunicationHandler(c);};b.prototype.addShellCommunicationHandler=function(k,c){P.addShellCommunicationHandler(k,c);};b.prototype._getPostMesageInterface=function(s,i){return P._getPostMesageInterface(s,i);};return new b();},true);
